import{f as e,a,b as t,e as l,c as s,d as i,x as r}from"./element-plus-6d3da066.js";import{G as o,F as n,_ as m}from"./index-bf54a2b0.js";import{t as p,g as d,h as c,i as u}from"./article-98b4feff.js";import{d as f,a2 as b,r as g,t as j,b as h,o as y,c as v,X as V,ab as _,ac as w,u as x,a as F,Q as k,H as D,F as H,V as M,n as Y}from"./@vue-b1347690.js";import"./lodash-es-b6050654.js";import"./@vueuse-7bacca58.js";import"./@popperjs-91a2fff2.js";import"./@ctrl-eb0b847c.js";import"./dayjs-2378ce3f.js";import"./axios-aec7d438.js";import"./async-validator-ec45d329.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-eea50788.js";import"./@floating-ui-a9dc73ab.js";import"./index-2f4a0259.js";/* empty css                      */import"./pinia-89efd9b3.js";import"./vue-demi-5b9a0fa5.js";import"./vue-router-ef0e62c7.js";import"./nprogress-2caf32ee.js";import"./js-cookie-1db5286e.js";const T={class:"operate-wrapper"},C={class:"operate-left-btn"},z=M("新增"),P=M("删除"),O={class:"operate-right-btn"},S=M("导入"),E=M("导出"),U=M("保存"),A=M("重置"),B=f({setup(f){const M=b({searchForm:{limit:10,page:1,name:""},formVisible:!1}),B=b({id:"",name:""}),G=e=>{R.currentPage=1,M.searchForm=e,q()},q=async()=>{M.searchForm.page=R.currentPage,M.searchForm.limit=R.pageSize;const{list:e,total:a}=await p(M.searchForm);R.data=e,R.total=a},Q=g(),X=()=>{Q.value.resetFields(),B.id=""},I=()=>{X(),M.formVisible=!1},J=async()=>{await Q.value.validate(),B.id?await d(B.id,B):await c(B),q(),a({type:"success",message:B.id?"修改成功":"新增成功"}),I()},K=e=>{M.formVisible=!0,Y((()=>{B.id=e.id,B.name=e.name}))},L=({id:e})=>{t.confirm("确定删除该标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await u(e),q(),a({type:"success",message:"删除成功!"})})).catch((()=>{}))},N=b({onClickSearch:G,onClickClear:G,filters:[{type:o.input,key:"name",label:"标签名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),R=b({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"标签名",prop:"name"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),W=b({name:[{required:!0,message:"请输入标签名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}),{formVisible:Z}=j(M);return h((()=>{q()})),(a,t)=>{const o=l,p=m,d=s,c=i,u=r;return y(),v(H,null,[V(n,_(w(x(N))),null,16),F("div",T,[F("div",C,[V(o,{plain:"",onClick:t[0]||(t[0]=e=>Z.value=!0)},{default:k((()=>[z])),_:1}),V(o,{plain:"",type:"danger"},{default:k((()=>[P])),_:1})]),F("div",O,[V(o,{type:"primary"},{default:k((()=>[S])),_:1}),V(o,{type:"primary"},{default:k((()=>[E])),_:1})])]),V(p,{tableOpts:x(R),"onUpdate:tableOpts":t[1]||(t[1]=e=>D(R)?R.value=e:R=e),onGetTableData:q,onHandleEdit:K,onHandleDel:L},null,8,["tableOpts"]),V(u,{title:(x(B).id?"编辑":"新增")+"标签",modelValue:x(Z),"onUpdate:modelValue":t[4]||(t[4]=e=>D(Z)?Z.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":I},{default:k((()=>[V(x(e),{model:x(B),"status-icon":"",rules:x(W),ref_key:"formEle",ref:Q,"label-width":"100px"},{default:k((()=>[V(c,{label:"标签名：",prop:"name"},{default:k((()=>[V(d,{modelValue:x(B).name,"onUpdate:modelValue":t[2]||(t[2]=e=>x(B).name=e)},null,8,["modelValue"])])),_:1}),V(c,null,{default:k((()=>[V(o,{type:"primary",onClick:J},{default:k((()=>[U])),_:1}),V(o,{onClick:t[3]||(t[3]=e=>X())},{default:k((()=>[A])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{B as default};
