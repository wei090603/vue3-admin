import{f as e,c as a,y as t,z as l,A as s,d as r,e as o,a as n,B as d,C as i,D as p,F as u}from"./element-plus-6d3da066.js";import{_ as c,u as m}from"./index-68e6e469.js";import{d as h,a2 as y,r as b,o as f,c as g,X as k,Q as w,F as v,a6 as O,P as C,u as S,M as V,U as x,J as P,K as z,a as _,V as F,W as Y,f as D,a0 as M,R as U,S as B}from"./@vue-b1347690.js";import{d as H}from"./dayjs-2378ce3f.js";var N=(e=>(e.input="input",e.select="simpleSelect",e.dateRange="dateRange",e.datetimeRange="datetimeRange",e.date="date",e.custom="custom",e))(N||{});const T={class:"search-wrapper"},$={class:"search-btn-list"};var R=c(h({props:{labelWidth:{type:Number,default:100},isShowClearBtn:{type:Boolean,default:!0},clearBtnText:{type:String,default:"清除条件"},searchBtnText:{type:String,default:"搜索"},onClickSearch:{type:Function,required:!0},onClickClear:{type:Function,required:!0},filters:{type:Array,required:!0}},setup(n){const d=n,i=y({}),p=y({}),u=b(new Date);d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue,e.validator&&(p[a]=e.validator)}));const c=b(),m=async()=>{await c.value.validate()&&d.onClickSearch(i)},h=()=>{c.value.clearValidate(),d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue})),u.value=new Date,d.onClickClear(i)};return(d,y)=>{const b=a,D=t,M=l,U=s,B=r,H=o;return f(),g("div",T,[k(S(e),{ref_key:"searchForm",ref:c,rules:S(p),inline:!0,model:S(i),class:"search-form clearfix","label-width":`${n.labelWidth}px`},{default:w((()=>[(f(!0),g(v,null,O(n.filters,(e=>(f(),C(B,{key:e.key,label:e.label,class:z(e.className),prop:e.key},{default:w((()=>{var a,t;return[e.type===S(N).input?(f(),C(b,V({key:0,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,placeholder:"请输入搜索内容",clearable:""},e.inputConfig),null,16,["modelValue","onUpdate:modelValue"])):x("",!0),e.type===S(N).select?(f(),C(M,V({key:1,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,placeholder:"请选择",clearable:""},e.selectConfig),{default:w((()=>[e.isShowAll?(f(),C(D,{key:0,label:"全部",value:""})):x("",!0),e.getOptions?(f(!0),g(v,{key:1},O(e.getOptions(S(i)),(e=>(f(),C(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128)):(f(!0),g(v,{key:2},O(e.options,(e=>(f(),C(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):x("",!0),e.type===S(N).date?(f(),C(U,V({key:2,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"date",size:"default","value-format":null!=(a=e.filterParams)?a:"YYYY-MM-DD",placeholder:"选择日期"},e.dateConfig,{"default-value":u.value}),null,16,["modelValue","onUpdate:modelValue","value-format","default-value"])):x("",!0),e.type===S(N).dateRange?(f(),C(U,V({key:3,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"daterange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):x("",!0),e.type===S(N).datetimeRange?(f(),C(U,V({key:4,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"datetimerange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):x("",!0),e.type===S(N).custom?P(d.$slots,e.key,{key:5,slotValue:S(i)[e.key],item:e,change:(t=e.key,e=>{i[t]=e})},void 0,!0):x("",!0)]})),_:2},1032,["label","class","prop"])))),128)),_("div",$,[P(d.$slots,"operate-before",{},void 0,!0),k(H,{type:"primary",class:"btn-primary",onClick:m},{default:w((()=>[F(Y(n.searchBtnText),1)])),_:1}),n.isShowClearBtn?(f(),C(H,{key:0,type:"primary",class:"btn-search",onClick:h},{default:w((()=>[F(Y(n.clearBtnText),1)])),_:1})):x("",!0),P(d.$slots,"operate-after",{},void 0,!0)])])),_:3},8,["rules","model","label-width"])])}}}),[["__scopeId","data-v-f094d2bc"]]);const j={formatTime:(e,a="YYYY-MM-DD HH:MM:ss")=>e?H(e).format(a):""};var W={filterFun:(e,a)=>j[a[0]](e,a[1])};const A={key:2},q={slot:"reference",class:"text-hidden"},E={key:4};var I=c(h({props:{tableOpts:{type:Object,default:()=>({currentPage:1,pageSize:10,total:0,data:[],column:[{hidden:!1,label:"",prop:"",width:"",minWidth:"",className:"",filterParams:[],showPopover:!1,emptyText:"",useSlot:!1,useHeaderSlot:!1}],indexes:["编号",60],hasOperation:!1,dynamic:!0,pagination:!0,pageList:null,pageHandleFunc:"",multipleTable:!1,multipleSelection:[],hideBorder:!1,spanMethod:()=>[1,1],operation:{label:"操作",width:"200",minWidth:"",className:"show",data:[{label:"通过",handleFunc:"handleSubmit",size:"mini",className:"show",type:"primary",icon:"",isShow:e=>"show"===e.status,dataTestId:""}]}})}},emits:["handleEdit","handleRestPwd","handlePermission","handleDel","getTableData","handleCreate"],setup(e,{emit:a}){const t=e,l=m(),s=e=>{t.tableOpts.pageSize=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},r=b(null);D((()=>{r.value.doLayout()}));const c=e=>{t.tableOpts.currentPage=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},h=e=>{t.tableOpts.multipleSelection=e};return(t,m)=>{const y=d,b=i,V=o,D=p,H=u;return f(),g(v,null,[k(D,{ref_key:"table",ref:r,data:e.tableOpts.dynamic?e.tableOpts.data:e.tableOpts.data.slice((e.tableOpts.currentPage-1)*e.tableOpts.pageSize,e.tableOpts.currentPage*e.tableOpts.pageSize),border:!e.tableOpts.hideBorder,"span-method":e.tableOpts.spanMethod,"row-key":"id","child-key":e.tableOpts.rowKey,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},onSelectionChange:h},{default:w((()=>[e.tableOpts.multipleTable?(f(),C(y,{key:0,type:"selection","class-name":"multiple-column",width:"45"})):x("",!0),e.tableOpts.indexes?(f(),C(y,{key:1,type:"index",label:e.tableOpts.indexes[0],"class-name":"serial-number",width:e.tableOpts.indexes[1]||60},null,8,["label","width"])):x("",!0),(f(!0),g(v,null,O(e.tableOpts.column,((e,a)=>(f(),g(v,null,[e.hidden?x("",!0):(f(),C(y,{key:a,label:e.label,prop:e.prop,"class-name":e.className||"",width:e.width||"","min-width":e.minWidth||"",align:"center"},{header:w((a=>[e.useHeaderSlot?P(t.$slots,e.prop+"Header",{key:0,data:a,column:e},void 0,!0):(f(),g(v,{key:1},[F(Y(e.label),1)],64))])),default:w((a=>[e.useSlot?P(t.$slots,e.prop,{key:0,data:a.row,index:a.$index,value:a.row[e.prop],column:e},void 0,!0):e.render?(f(),g(v,{key:1},[F(Y(e.render(a.row[e.prop],a.$index,a.row)),1)],64)):e.filterParams?(f(),g("span",A,Y(S(W).filterFun(a.row[e.prop],e.filterParams)),1)):e.showPopover&&a.row[e.prop]&&a.row[e.prop].length>20?(f(),C(b,{key:3,placement:"bottom-start",width:"200",trigger:"hover",content:a.row[e.prop]},{default:w((()=>[_("div",q,Y(a.row[e.prop]),1)])),_:2},1032,["content"])):(f(),g("span",E,Y(a.row[e.prop]),1))])),_:2},1032,["label","prop","class-name","width","min-width"]))],64)))),256)),e.tableOpts.hasOperation?(f(),C(y,{key:2,fixed:"right",label:e.tableOpts.operation.label,width:e.tableOpts.operation.width||"","min-width":e.tableOpts.operation.minWidth||"","class-name":e.tableOpts.operation.className||""},{default:w((t=>[(f(!0),g(v,null,O(e.tableOpts.operation.data,(e=>(f(),g(v,null,[!e.isShow||e.isShow(t.row)?(f(),C(V,{key:e.id,type:e.type||"text",size:e.size||"default",class:z(e.classNameFun?e.classNameFun(t.row):e.className||""),onClick:M((s=>{return r=e.handleFunc,o=t.row,d=t.$index,void(l.superAdmin?a(r,o,d):n.error({showClose:!0,message:"对不起，您暂无权限执行该操作！",type:"warning"}));var r,o,d}),["stop"])},{default:w((()=>[F(Y(e.label),1)])),_:2},1032,["type","size","class","onClick"])):x("",!0)],64)))),256))])),_:1},8,["label","width","min-width","class-name"])):x("",!0)])),_:3},8,["data","border","span-method","child-key"]),e.tableOpts.pagination?U((f(),C(H,{key:0,currentPage:e.tableOpts.currentPage,"onUpdate:currentPage":m[0]||(m[0]=a=>e.tableOpts.currentPage=a),background:"","page-sizes":e.tableOpts.pageList||[10,20,30,40],"page-size":e.tableOpts.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableOpts.total,onSizeChange:s,onCurrentChange:c},null,8,["currentPage","page-sizes","page-size","total"])),[[B,e.tableOpts.total]]):x("",!0)],64)}}}),[["__scopeId","data-v-05e0d957"]]);export{R as F,N as G,I as _};
