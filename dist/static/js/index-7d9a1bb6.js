import{v as e,K as a,w as l,x as t,y as s,z as o,u as r,B as i,o as p,n as d}from"./element-plus-027274dd.js";import{r as n,a as u,b as c,c as m}from"./resources-a749847e.js";import{_ as f}from"./index-2a49149a.js";import{d as b,r as y,a2 as j,b as v,t as V,o as _,c as h,a as k,X as w,Q as x,W as g,u as C,P as U,H as I,U as z,V as N,n as B}from"./@vue-fa3c77af.js";import"./lodash-es-b6050654.js";import"./@vueuse-8f917d05.js";import"./@popperjs-91a2fff2.js";import"./@ctrl-eb0b847c.js";import"./dayjs-2378ce3f.js";import"./axios-aec7d438.js";import"./async-validator-ec45d329.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-eea50788.js";import"./@floating-ui-a9dc73ab.js";/* empty css                      */import"./pinia-7aec78c7.js";import"./vue-demi-5b9a0fa5.js";import"./vue-router-5335ed28.js";import"./path-browserify-42f42cef.js";import"./@element-plus-e18b2c24.js";import"./js-cookie-1db5286e.js";import"./nprogress-2caf32ee.js";const D={class:"warpper"},q={class:"operate-wrapper"},F={class:"operate-left-btn"},T=N("新增"),E=N("删除"),H={class:"operate-right-btn"},K=N("导入"),L=N("导出"),P={class:"custom-tree-node"},Q=N("添加资源"),W=N("编辑资源"),X=N("删除资源"),A=N("保存"),G=N("重置");var J=f(b({setup(f){const b=y(),N=j({formVisible:!1,resourcesData:[],parentName:""}),J=async()=>{N.resourcesData=await n({})},M=()=>{b.value.resetFields()},O=()=>{M(),R.id="",N.parentName="",R.parentId="",N.formVisible=!1},R=j({id:"",parentId:"",title:"",path:"",icon:"",type:"menu"}),S=j({title:[{required:!0,message:"请输入资源名称",trigger:"blur"}],path:[{required:!0,message:"请输入资源路径",trigger:"blur"}]}),Y=async()=>{await b.value.validate(),R.id?await c(+R.id,R):await m(R),J(),d({type:"success",message:R.id?"修改成功":"新增成功"}),O()};v((()=>{J()}));const{formVisible:Z,resourcesData:$,parentName:ee}=V(N);return(n,c)=>{const m=e,f=a,y=l,j=t,v=s,V=o,ae=r;return _(),h("div",D,[k("div",q,[k("div",F,[w(m,{plain:"",onClick:c[0]||(c[0]=e=>Z.value=!0)},{default:x((()=>[T])),_:1}),w(m,{plain:"",type:"danger"},{default:x((()=>[E])),_:1})]),k("div",H,[w(m,{type:"primary"},{default:x((()=>[K])),_:1}),w(m,{type:"primary",onClick:c[1]||(c[1]=()=>{})},{default:x((()=>[L])),_:1})])]),w(f,{data:C($),"show-checkbox":"","node-key":"id",props:{label:"title"},"default-expand-all":"","expand-on-click-node":!1},{default:x((({node:e,data:a})=>[k("span",P,[k("span",null,g(e.label),1),k("span",null,[w(m,{type:"text",onClick:e=>{return l=a,N.parentName=l.title,R.parentId=l.id,void(N.formVisible=!0);var l}},{default:x((()=>[Q])),_:2},1032,["onClick"]),w(m,{type:"text",onClick:e=>{return l=a,R.id=l.id,N.formVisible=!0,void B((()=>{R.title=l.title,R.path=l.path,R.icon=l.icon,R.type=l.type}));var l}},{default:x((()=>[W])),_:2},1032,["onClick"]),w(m,{class:"notice-text-color",type:"text",onClick:e=>(async e=>{p.confirm("确定删除该资源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await u(e),J(),d({type:"success",message:"删除成功!"})})).catch((()=>{}))})(a.id)},{default:x((()=>[X])),_:2},1032,["onClick"])])])])),_:1},8,["data"]),w(ae,{title:(C(R).id?"编辑":"新增")+"资源",modelValue:C(Z),"onUpdate:modelValue":c[7]||(c[7]=e=>I(Z)?Z.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":O},{default:x((()=>[w(C(i),{ref_key:"formEle",ref:b,model:C(R),rules:C(S),"label-width":"100px",class:"demo-resourceForm"},{default:x((()=>[C(R).parentId?(_(),U(j,{key:0,label:"父对象",prop:"parentLable"},{default:x((()=>[w(y,{modelValue:C(ee),"onUpdate:modelValue":c[2]||(c[2]=e=>I(ee)?ee.value=e:null),disabled:""},null,8,["modelValue"])])),_:1})):z("",!0),w(j,{label:"资源名称",prop:"title"},{default:x((()=>[w(y,{modelValue:C(R).title,"onUpdate:modelValue":c[3]||(c[3]=e=>C(R).title=e)},null,8,["modelValue"])])),_:1}),w(j,{label:"资源路由",prop:"path"},{default:x((()=>[w(y,{modelValue:C(R).path,"onUpdate:modelValue":c[4]||(c[4]=e=>C(R).path=e)},null,8,["modelValue"])])),_:1}),w(j,{label:"Icon",prop:"icon"},{default:x((()=>[w(y,{modelValue:C(R).icon,"onUpdate:modelValue":c[5]||(c[5]=e=>C(R).icon=e)},null,8,["modelValue"])])),_:1}),w(j,{label:"菜单/按钮",prop:"type"},{default:x((()=>[w(V,{modelValue:C(R).type,"onUpdate:modelValue":c[6]||(c[6]=e=>C(R).type=e),placeholder:"资源类型"},{default:x((()=>[w(v,{label:"菜单",value:"menu"}),w(v,{label:"按钮",value:"button"})])),_:1},8,["modelValue"])])),_:1}),w(j,null,{default:x((()=>[w(m,{type:"primary",onClick:Y},{default:x((()=>[A])),_:1}),w(m,{onClick:M},{default:x((()=>[G])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-e4a87bc8"]]);export{J as default};
