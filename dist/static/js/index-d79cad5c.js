import{v as e,w as a,x as l,u as t,B as s,n as i,o as r}from"./element-plus-027274dd.js";import{G as o,F as n,_ as d}from"./index-d4022864.js";import{s as p}from"./index-2a49149a.js";import{d as m,a2 as u,r as c,t as f,b,o as g,c as j,X as h,ab as y,ac as v,u as V,a as k,Q as _,H as w,F as x,V as F,n as D}from"./@vue-fa3c77af.js";import"./lodash-es-b6050654.js";import"./@vueuse-8f917d05.js";import"./@popperjs-91a2fff2.js";import"./@ctrl-eb0b847c.js";import"./dayjs-2378ce3f.js";import"./axios-aec7d438.js";import"./async-validator-ec45d329.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-eea50788.js";import"./@floating-ui-a9dc73ab.js";/* empty css                      */import"./pinia-7aec78c7.js";import"./vue-demi-5b9a0fa5.js";import"./vue-router-5335ed28.js";import"./path-browserify-42f42cef.js";import"./@element-plus-e18b2c24.js";import"./js-cookie-1db5286e.js";import"./nprogress-2caf32ee.js";const H={class:"operate-wrapper"},M={class:"operate-left-btn"},Y=F("新增"),T=F("删除"),C={class:"operate-right-btn"},U=F("导入"),z=F("导出"),O=F("保存"),P=F("重置"),B=m({setup(m){const F=u({searchForm:{},formVisible:!1}),B=u({id:"",title:"",link:"",sort:""}),E=e=>{J.currentPage=1,F.searchForm=e,S()},S=async()=>{var e;J.data=await(e=F.searchForm,p({url:"menu",method:"get",params:e}))},q=c(),A=()=>{q.value.resetFields()},G=()=>{A(),B.id="",F.formVisible=!1},$=async()=>{var e,a;await q.value.validate(),B.id?await(e=B.id,a=B,p({url:`menu/${e}`,method:"patch",data:a})):await(e=>p({url:"menu",method:"post",data:e}))(B),S(),i({type:"success",message:B.id?"修改成功":"新增成功"}),G()},Q=e=>{F.formVisible=!0,D((()=>{B.id=e.id,B.title=e.title,B.link=e.link,B.sort=e.sort}))},X=({id:e})=>{r.confirm("确定删除该导航, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await(e=>p({url:`menu/${e}`,method:"delete"}))(e),S(),i({type:"success",message:"删除成功!"})})).catch((()=>{}))},I=u({onClickSearch:E,onClickClear:E,filters:[{type:o.input,key:"title",label:"导航名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),J=u({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!1,pageHandleFunc:"getTableData",column:[{label:"导航名",prop:"title"},{label:"链接",prop:"link"},{label:"排序",prop:"sort"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),K=u({title:[{required:!0,message:"请输入导航名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入导航链接",trigger:"blur"}]}),{formVisible:L}=f(F);return b((()=>{S()})),(i,r)=>{const o=e,p=d,m=a,u=l,c=t;return g(),j(x,null,[h(n,y(v(V(I))),null,16),k("div",H,[k("div",M,[h(o,{plain:"",onClick:r[0]||(r[0]=e=>L.value=!0)},{default:_((()=>[Y])),_:1}),h(o,{plain:"",type:"danger"},{default:_((()=>[T])),_:1})]),k("div",C,[h(o,{type:"primary"},{default:_((()=>[U])),_:1}),h(o,{type:"primary"},{default:_((()=>[z])),_:1})])]),h(p,{tableOpts:V(J),"onUpdate:tableOpts":r[1]||(r[1]=e=>w(J)?J.value=e:J=e),onGetTableData:S,onHandleEdit:Q,onHandleDel:X},null,8,["tableOpts"]),h(c,{title:(V(B).id?"编辑":"新增")+"导航",modelValue:V(L),"onUpdate:modelValue":r[6]||(r[6]=e=>w(L)?L.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":G},{default:_((()=>[h(V(s),{model:V(B),"status-icon":"",rules:V(K),ref_key:"formEle",ref:q,"label-width":"100px"},{default:_((()=>[h(u,{label:"导航标题：",prop:"title"},{default:_((()=>[h(m,{modelValue:V(B).title,"onUpdate:modelValue":r[2]||(r[2]=e=>V(B).title=e)},null,8,["modelValue"])])),_:1}),h(u,{label:"导航链接：",prop:"link"},{default:_((()=>[h(m,{modelValue:V(B).link,"onUpdate:modelValue":r[3]||(r[3]=e=>V(B).link=e)},null,8,["modelValue"])])),_:1}),h(u,{label:"排序：",prop:"sort"},{default:_((()=>[h(m,{modelValue:V(B).sort,"onUpdate:modelValue":r[4]||(r[4]=e=>V(B).sort=e)},null,8,["modelValue"])])),_:1}),h(u,null,{default:_((()=>[h(o,{type:"primary",onClick:$},{default:_((()=>[O])),_:1}),h(o,{onClick:r[5]||(r[5]=e=>A())},{default:_((()=>[P])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{B as default};
