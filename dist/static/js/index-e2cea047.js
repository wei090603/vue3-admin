import{f as e,c as a,y as t,z as l,A as s,d as r,e as o,B as n,C as d,D as i,F as p}from"./element-plus-6d3da066.js";import{_ as u,u as c}from"./index-be24d8a3.js";import{d as m,a2 as h,r as y,o as b,c as f,X as k,Q as g,F as w,a6 as v,P as O,u as S,M as C,U as V,J as x,K as P,a as z,V as _,W as F,f as Y,a0 as D,R as M,S as U}from"./@vue-b1347690.js";import{d as B}from"./dayjs-2378ce3f.js";var H=(e=>(e.input="input",e.select="simpleSelect",e.dateRange="dateRange",e.datetimeRange="datetimeRange",e.date="date",e.custom="custom",e))(H||{});const N={class:"search-wrapper"},T={class:"search-btn-list"};var $=u(m({props:{labelWidth:{type:Number,default:100},isShowClearBtn:{type:Boolean,default:!0},clearBtnText:{type:String,default:"清除条件"},searchBtnText:{type:String,default:"搜索"},onClickSearch:{type:Function,required:!0},onClickClear:{type:Function,required:!0},filters:{type:Array,required:!0}},setup(n){const d=n,i=h({}),p=h({}),u=y(new Date);d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue,e.validator&&(p[a]=e.validator)}));const c=y(),m=async()=>{await c.value.validate()&&d.onClickSearch(i)},Y=()=>{c.value.clearValidate(),d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue})),u.value=new Date,d.onClickClear(i)};return(d,h)=>{const y=a,D=t,M=l,U=s,B=r,$=o;return b(),f("div",N,[k(S(e),{ref_key:"searchForm",ref:c,rules:S(p),inline:!0,model:S(i),class:"search-form clearfix","label-width":`${n.labelWidth}px`},{default:g((()=>[(b(!0),f(w,null,v(n.filters,(e=>(b(),O(B,{key:e.key,label:e.label,class:P(e.className),prop:e.key},{default:g((()=>{var a,t;return[e.type===S(H).input?(b(),O(y,C({key:0,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,placeholder:"请输入搜索内容",clearable:""},e.inputConfig),null,16,["modelValue","onUpdate:modelValue"])):V("",!0),e.type===S(H).select?(b(),O(M,C({key:1,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,placeholder:"请选择",clearable:""},e.selectConfig),{default:g((()=>[e.isShowAll?(b(),O(D,{key:0,label:"全部",value:""})):V("",!0),e.getOptions?(b(!0),f(w,{key:1},v(e.getOptions(S(i)),(e=>(b(),O(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128)):(b(!0),f(w,{key:2},v(e.options,(e=>(b(),O(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):V("",!0),e.type===S(H).date?(b(),O(U,C({key:2,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"date",size:"default","value-format":null!=(a=e.filterParams)?a:"YYYY-MM-DD",placeholder:"选择日期"},e.dateConfig,{"default-value":u.value}),null,16,["modelValue","onUpdate:modelValue","value-format","default-value"])):V("",!0),e.type===S(H).dateRange?(b(),O(U,C({key:3,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"daterange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):V("",!0),e.type===S(H).datetimeRange?(b(),O(U,C({key:4,modelValue:S(i)[e.key],"onUpdate:modelValue":a=>S(i)[e.key]=a,type:"datetimerange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):V("",!0),e.type===S(H).custom?x(d.$slots,e.key,{key:5,slotValue:S(i)[e.key],item:e,change:(t=e.key,e=>{i[t]=e})},void 0,!0):V("",!0)]})),_:2},1032,["label","class","prop"])))),128)),z("div",T,[x(d.$slots,"operate-before",{},void 0,!0),k($,{type:"primary",class:"btn-primary",onClick:m},{default:g((()=>[_(F(n.searchBtnText),1)])),_:1}),n.isShowClearBtn?(b(),O($,{key:0,type:"primary",class:"btn-search",onClick:Y},{default:g((()=>[_(F(n.clearBtnText),1)])),_:1})):V("",!0),x(d.$slots,"operate-after",{},void 0,!0)])])),_:3},8,["rules","model","label-width"])])}}}),[["__scopeId","data-v-f094d2bc"]]);const R={formatTime:(e,a="YYYY-MM-DD HH:MM:ss")=>e?B(e).format(a):""};var j={filterFun:(e,a)=>R[a[0]](e,a[1])};const W={key:2},q={slot:"reference",class:"text-hidden"},A={key:4};var E=u(m({props:{tableOpts:{type:Object,default:()=>({currentPage:1,pageSize:10,total:0,data:[],column:[{hidden:!1,label:"",prop:"",width:"",minWidth:"",className:"",filterParams:[],showPopover:!1,emptyText:"",useSlot:!1,useHeaderSlot:!1}],indexes:["编号",60],hasOperation:!1,dynamic:!0,pagination:!0,pageList:null,pageHandleFunc:"",multipleTable:!1,multipleSelection:[],hideBorder:!1,spanMethod:()=>[1,1],operation:{label:"操作",width:"200",minWidth:"",className:"show",data:[{label:"通过",handleFunc:"handleSubmit",size:"mini",className:"show",type:"primary",icon:"",isShow:e=>"show"===e.status,dataTestId:""}]}})}},emits:["handleEdit","handleRestPwd","handlePermission","handleDel","getTableData","handleCreate"],setup(e,{emit:a}){const t=e;c();const l=e=>{t.tableOpts.pageSize=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},s=y(null);Y((()=>{s.value.doLayout()}));const r=e=>{t.tableOpts.currentPage=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},u=e=>{t.tableOpts.multipleSelection=e};return(t,c)=>{const m=n,h=d,y=o,C=i,Y=p;return b(),f(w,null,[k(C,{ref_key:"table",ref:s,data:e.tableOpts.dynamic?e.tableOpts.data:e.tableOpts.data.slice((e.tableOpts.currentPage-1)*e.tableOpts.pageSize,e.tableOpts.currentPage*e.tableOpts.pageSize),border:!e.tableOpts.hideBorder,"span-method":e.tableOpts.spanMethod,"row-key":"id","child-key":e.tableOpts.rowKey,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},onSelectionChange:u},{default:g((()=>[e.tableOpts.multipleTable?(b(),O(m,{key:0,type:"selection","class-name":"multiple-column",width:"45"})):V("",!0),e.tableOpts.indexes?(b(),O(m,{key:1,type:"index",label:e.tableOpts.indexes[0],"class-name":"serial-number",width:e.tableOpts.indexes[1]||60},null,8,["label","width"])):V("",!0),(b(!0),f(w,null,v(e.tableOpts.column,((e,a)=>(b(),f(w,null,[e.hidden?V("",!0):(b(),O(m,{key:a,label:e.label,prop:e.prop,"class-name":e.className||"",width:e.width||"","min-width":e.minWidth||"",align:"center"},{header:g((a=>[e.useHeaderSlot?x(t.$slots,e.prop+"Header",{key:0,data:a,column:e},void 0,!0):(b(),f(w,{key:1},[_(F(e.label),1)],64))])),default:g((a=>[e.useSlot?x(t.$slots,e.prop,{key:0,data:a.row,index:a.$index,value:a.row[e.prop],column:e},void 0,!0):e.render?(b(),f(w,{key:1},[_(F(e.render(a.row[e.prop],a.$index,a.row)),1)],64)):e.filterParams?(b(),f("span",W,F(S(j).filterFun(a.row[e.prop],e.filterParams)),1)):e.showPopover&&a.row[e.prop]&&a.row[e.prop].length>20?(b(),O(h,{key:3,placement:"bottom-start",width:"200",trigger:"hover",content:a.row[e.prop]},{default:g((()=>[z("div",q,F(a.row[e.prop]),1)])),_:2},1032,["content"])):(b(),f("span",A,F(a.row[e.prop]),1))])),_:2},1032,["label","prop","class-name","width","min-width"]))],64)))),256)),e.tableOpts.hasOperation?(b(),O(m,{key:2,fixed:"right",label:e.tableOpts.operation.label,width:e.tableOpts.operation.width||"","min-width":e.tableOpts.operation.minWidth||"","class-name":e.tableOpts.operation.className||""},{default:g((t=>[(b(!0),f(w,null,v(e.tableOpts.operation.data,(e=>(b(),f(w,null,[!e.isShow||e.isShow(t.row)?(b(),O(y,{key:e.id,type:e.type||"text",size:e.size||"default",class:P(e.classNameFun?e.classNameFun(t.row):e.className||""),onClick:D((l=>{return s=e.handleFunc,r=t.row,o=t.$index,void a(s,r,o);var s,r,o}),["stop"])},{default:g((()=>[_(F(e.label),1)])),_:2},1032,["type","size","class","onClick"])):V("",!0)],64)))),256))])),_:1},8,["label","width","min-width","class-name"])):V("",!0)])),_:3},8,["data","border","span-method","child-key"]),e.tableOpts.pagination?M((b(),O(Y,{key:0,currentPage:e.tableOpts.currentPage,"onUpdate:currentPage":c[0]||(c[0]=a=>e.tableOpts.currentPage=a),background:"","page-sizes":e.tableOpts.pageList||[10,20,30,40],"page-size":e.tableOpts.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableOpts.total,onSizeChange:l,onCurrentChange:r},null,8,["currentPage","page-sizes","page-size","total"])),[[U,e.tableOpts.total]]):V("",!0)],64)}}}),[["__scopeId","data-v-b194dd3e"]]);export{$ as F,H as G,E as _};
