import{D as e,y as a,A as t,B as l,F as s,z as r,x as o,G as n,H as d,I as i,J as p}from"./element-plus-c3f3467b.js";import{_ as u}from"./index-1dd190b0.js";import{d as c,a2 as m,r as h,o as y,c as b,X as f,Q as k,F as g,a6 as w,P as v,u as O,M as S,U as V,J as x,K as C,a as P,V as z,W as _,f as F,a0 as Y,R as D,S as M}from"./@vue-722b6523.js";import{d as U}from"./dayjs-2378ce3f.js";var H=(e=>(e.input="input",e.select="simpleSelect",e.dateRange="dateRange",e.datetimeRange="datetimeRange",e.date="date",e.custom="custom",e))(H||{});const B={class:"search-wrapper"},N={class:"search-btn-list"};var T=u(c({props:{labelWidth:{type:Number,default:100},isShowClearBtn:{type:Boolean,default:!0},clearBtnText:{type:String,default:"清除条件"},searchBtnText:{type:String,default:"搜索"},onClickSearch:{type:Function,required:!0},onClickClear:{type:Function,required:!0},filters:{type:Array,required:!0}},setup(n){const d=n,i=m({}),p=m({}),u=h(new Date);d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue,e.validator&&(p[a]=e.validator)}));const c=h(),F=async()=>{await c.value.validate()&&d.onClickSearch(i)},Y=()=>{c.value.clearValidate(),d.filters.forEach((e=>{const a=e.key;i[a]=e.initialValue})),u.value=new Date,d.onClickClear(i)};return(d,m)=>{const h=a,D=t,M=l,U=s,T=r,$=o;return y(),b("div",B,[f(O(e),{ref_key:"searchForm",ref:c,rules:O(p),inline:!0,model:O(i),class:"search-form clearfix","label-width":`${n.labelWidth}px`},{default:k((()=>[(y(!0),b(g,null,w(n.filters,(e=>(y(),v(T,{key:e.key,label:e.label,class:C(e.className),prop:e.key},{default:k((()=>{var a,t;return[e.type===O(H).input?(y(),v(h,S({key:0,modelValue:O(i)[e.key],"onUpdate:modelValue":a=>O(i)[e.key]=a,placeholder:"请输入搜索内容",clearable:""},e.inputConfig),null,16,["modelValue","onUpdate:modelValue"])):V("",!0),e.type===O(H).select?(y(),v(M,S({key:1,modelValue:O(i)[e.key],"onUpdate:modelValue":a=>O(i)[e.key]=a,placeholder:"请选择",clearable:""},e.selectConfig),{default:k((()=>[e.isShowAll?(y(),v(D,{key:0,label:"全部",value:""})):V("",!0),e.getOptions?(y(!0),b(g,{key:1},w(e.getOptions(O(i)),(e=>(y(),v(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128)):(y(!0),b(g,{key:2},w(e.options,(e=>(y(),v(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):V("",!0),e.type===O(H).date?(y(),v(U,S({key:2,modelValue:O(i)[e.key],"onUpdate:modelValue":a=>O(i)[e.key]=a,type:"date",size:"default","value-format":null!=(a=e.filterParams)?a:"YYYY-MM-DD",placeholder:"选择日期"},e.dateConfig,{"default-value":u.value}),null,16,["modelValue","onUpdate:modelValue","value-format","default-value"])):V("",!0),e.type===O(H).dateRange?(y(),v(U,S({key:3,modelValue:O(i)[e.key],"onUpdate:modelValue":a=>O(i)[e.key]=a,type:"daterange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):V("",!0),e.type===O(H).datetimeRange?(y(),v(U,S({key:4,modelValue:O(i)[e.key],"onUpdate:modelValue":a=>O(i)[e.key]=a,type:"datetimerange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):V("",!0),e.type===O(H).custom?x(d.$slots,e.key,{key:5,slotValue:O(i)[e.key],item:e,change:(t=e.key,e=>{i[t]=e})},void 0,!0):V("",!0)]})),_:2},1032,["label","class","prop"])))),128)),P("div",N,[x(d.$slots,"operate-before",{},void 0,!0),f($,{type:"primary",class:"btn-primary",onClick:F},{default:k((()=>[z(_(n.searchBtnText),1)])),_:1}),n.isShowClearBtn?(y(),v($,{key:0,type:"primary",class:"btn-search",onClick:Y},{default:k((()=>[z(_(n.clearBtnText),1)])),_:1})):V("",!0),x(d.$slots,"operate-after",{},void 0,!0)])])),_:3},8,["rules","model","label-width"])])}}}),[["__scopeId","data-v-3dd2a700"]]);const $={formatTime:(e,a="YYYY-MM-DD HH:MM:ss")=>e?U(e).format(a):""};var R={filterFun:(e,a)=>$[a[0]](e,a[1])};const j={class:"table"},W={key:2},I={slot:"reference",class:"text-hidden"},q={key:4};var A=u(c({props:{tableOpts:{type:Object,default:()=>({currentPage:1,pageSize:10,total:0,data:[],column:[{hidden:!1,label:"",prop:"",width:"",minWidth:"",className:"",filterParams:[],showPopover:!1,emptyText:"",useSlot:!1,useHeaderSlot:!1}],indexes:["编号",60],hasOperation:!1,dynamic:!0,pagination:!0,pageList:null,pageHandleFunc:"",multipleTable:!1,multipleSelection:[],hideBorder:!1,spanMethod:()=>[1,1],operation:{label:"操作",width:"200",minWidth:"",className:"show",data:[{label:"通过",handleFunc:"handleSubmit",size:"mini",className:"show",type:"primary",icon:"",isShow:e=>"show"===e.status,dataTestId:""}]}})}},emits:["handleEdit","handleRestPwd","handlePermission","handleDel","getTableData","handleCreate"],setup(e,{emit:a}){const t=e,l=e=>{t.tableOpts.pageSize=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},s=h(null);F((()=>{s.value.doLayout()}));const r=e=>{t.tableOpts.currentPage=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},u=e=>{t.tableOpts.multipleSelection=e};return(t,c)=>{const m=n,h=d,S=o,F=i,U=p;return y(),b("div",j,[f(F,{ref_key:"table",ref:s,data:e.tableOpts.dynamic?e.tableOpts.data:e.tableOpts.data.slice((e.tableOpts.currentPage-1)*e.tableOpts.pageSize,e.tableOpts.currentPage*e.tableOpts.pageSize),border:!e.tableOpts.hideBorder,"span-method":e.tableOpts.spanMethod,"row-key":"id","child-key":e.tableOpts.rowKey,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},onSelectionChange:u},{default:k((()=>[e.tableOpts.multipleTable?(y(),v(m,{key:0,type:"selection","class-name":"multiple-column",width:"45"})):V("",!0),e.tableOpts.indexes?(y(),v(m,{key:1,type:"index",label:e.tableOpts.indexes[0],"class-name":"serial-number",width:e.tableOpts.indexes[1]||60},null,8,["label","width"])):V("",!0),(y(!0),b(g,null,w(e.tableOpts.column,((e,a)=>(y(),b(g,null,[e.hidden?V("",!0):(y(),v(m,{key:a,label:e.label,prop:e.prop,"class-name":e.className||"",width:e.width||"","min-width":e.minWidth||"",align:"center"},{header:k((a=>[e.useHeaderSlot?x(t.$slots,e.prop+"Header",{key:0,data:a,column:e},void 0,!0):(y(),b(g,{key:1},[z(_(e.label),1)],64))])),default:k((a=>[e.useSlot?x(t.$slots,e.prop,{key:0,data:a.row,index:a.$index,value:a.row[e.prop],column:e},void 0,!0):e.render?(y(),b(g,{key:1},[z(_(e.render(a.row[e.prop],a.$index,a.row)),1)],64)):e.filterParams?(y(),b("span",W,_(O(R).filterFun(a.row[e.prop],e.filterParams)),1)):e.showPopover&&a.row[e.prop]&&a.row[e.prop].length>20?(y(),v(h,{key:3,placement:"bottom-start",width:"200",trigger:"hover",content:a.row[e.prop]},{default:k((()=>[P("div",I,_(a.row[e.prop]),1)])),_:2},1032,["content"])):(y(),b("span",q,_(a.row[e.prop]),1))])),_:2},1032,["label","prop","class-name","width","min-width"]))],64)))),256)),e.tableOpts.hasOperation?(y(),v(m,{key:2,fixed:"right",label:e.tableOpts.operation.label,width:e.tableOpts.operation.width||"","min-width":e.tableOpts.operation.minWidth||"","class-name":e.tableOpts.operation.className||""},{default:k((t=>[(y(!0),b(g,null,w(e.tableOpts.operation.data,(e=>(y(),b(g,null,[!e.isShow||e.isShow(t.row)?(y(),v(S,{key:e.id,type:e.type||"text",size:e.size||"default",class:C(e.classNameFun?e.classNameFun(t.row):e.className||""),onClick:Y((l=>{return s=e.handleFunc,r=t.row,o=t.$index,void a(s,r,o);var s,r,o}),["stop"])},{default:k((()=>[z(_(e.label),1)])),_:2},1032,["type","size","class","onClick"])):V("",!0)],64)))),256))])),_:1},8,["label","width","min-width","class-name"])):V("",!0)])),_:3},8,["data","border","span-method","child-key"]),e.tableOpts.pagination?D((y(),v(U,{key:0,currentPage:e.tableOpts.currentPage,"onUpdate:currentPage":c[0]||(c[0]=a=>e.tableOpts.currentPage=a),background:"","page-sizes":e.tableOpts.pageList||[10,20,30,40],"page-size":e.tableOpts.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableOpts.total,onSizeChange:l,onCurrentChange:r},null,8,["currentPage","page-sizes","page-size","total"])),[[M,e.tableOpts.total]]):V("",!0)])}}}),[["__scopeId","data-v-3a16b3a5"]]);export{T as F,H as G,A as _};
