import{x as e,y as a,z as t,w as s,D as l,n as i,o as r}from"../element-plus/element-plus.fbbbfa29.js";import{G as o,F as n,_ as m}from"../index/index.7b73d109.js";import{t as p,e as d,f as c,g as u}from"../article/article.b354bff6.js";import{d as f,a2 as b,r as g,t as j,b as y,o as h,c as v,X as w,ab as x,ac as V,u as _,a as F,Q as k,H as z,F as D,V as H,n as M}from"../@vue/@vue.0c036a59.js";import"../lodash-es/lodash-es.6278a1be.js";import"../@vueuse/@vueuse.e440a3a6.js";import"../@popperjs/@popperjs.172738d4.js";import"../@ctrl/@ctrl.17547d95.js";import"../dayjs/dayjs.481ce33c.js";import"../axios/axios.d56fff3c.js";import"../async-validator/async-validator.234fb871.js";import"../memoize-one/memoize-one.f0fba034.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../@floating-ui/@floating-ui.50900a5c.js";import"../../assets/index.755b2133.js";/* empty css                                     */import"../pinia/pinia.46e48237.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-router/vue-router.fe365eba.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../@element-plus/@element-plus.4f9203c7.js";import"../js-cookie/js-cookie.431252a9.js";import"../nprogress/nprogress.491658f2.js";const Y={class:"operate-wrapper"},T={class:"operate-left-btn"},C=H("新增"),P=H("删除"),O={class:"operate-right-btn"},S=H("导入"),E=H("导出"),U=H("保存"),A=H("重置"),B=f({setup(f){const H=b({searchForm:{limit:10,page:1,name:""},formVisible:!1}),B=b({id:"",name:""}),G=e=>{R.currentPage=1,H.searchForm=e,q()},q=async()=>{H.searchForm.page=R.currentPage,H.searchForm.limit=R.pageSize;const{list:e,total:a}=await p(H.searchForm);R.data=e,R.total=a},Q=g(),X=()=>{Q.value.resetFields(),B.id=""},I=()=>{X(),H.formVisible=!1},J=async()=>{await Q.value.validate(),B.id?await d(B.id,B):await c(B),q(),i({type:"success",message:B.id?"修改成功":"新增成功"}),I()},K=e=>{H.formVisible=!0,M((()=>{B.id=e.id,B.name=e.name}))},L=({id:e})=>{r.confirm("确定删除该标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await u(e),q(),i({type:"success",message:"删除成功!"})})).catch((()=>{}))},N=b({onClickSearch:G,onClickClear:G,filters:[{type:o.input,key:"name",label:"标签名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),R=b({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"标签名",prop:"name"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),W=b({name:[{required:!0,message:"请输入标签名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}),{formVisible:Z}=j(H);return y((()=>{q()})),(i,r)=>{const o=e,p=m,d=a,c=t,u=s;return h(),v(D,null,[w(n,x(V(_(N))),null,16),F("div",Y,[F("div",T,[w(o,{plain:"",onClick:r[0]||(r[0]=e=>Z.value=!0)},{default:k((()=>[C])),_:1}),w(o,{plain:"",type:"danger"},{default:k((()=>[P])),_:1})]),F("div",O,[w(o,{type:"primary"},{default:k((()=>[S])),_:1}),w(o,{type:"primary"},{default:k((()=>[E])),_:1})])]),w(p,{tableOpts:_(R),"onUpdate:tableOpts":r[1]||(r[1]=e=>z(R)?R.value=e:R=e),onGetTableData:q,onHandleEdit:K,onHandleDel:L},null,8,["tableOpts"]),w(u,{title:(_(B).id?"编辑":"新增")+"标签",modelValue:_(Z),"onUpdate:modelValue":r[4]||(r[4]=e=>z(Z)?Z.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":I},{default:k((()=>[w(_(l),{model:_(B),"status-icon":"",rules:_(W),ref_key:"formEle",ref:Q,"label-width":"100px"},{default:k((()=>[w(c,{label:"标签名：",prop:"name"},{default:k((()=>[w(d,{modelValue:_(B).name,"onUpdate:modelValue":r[2]||(r[2]=e=>_(B).name=e)},null,8,["modelValue"])])),_:1}),w(c,null,{default:k((()=>[w(o,{type:"primary",onClick:J},{default:k((()=>[U])),_:1}),w(o,{onClick:r[3]||(r[3]=e=>X())},{default:k((()=>[A])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{B as default};
