import{x as e,y as a,z as l,w as t,D as s,n as i,o as r}from"../element-plus/element-plus.fbbbfa29.js";import{G as o,F as n,_ as p}from"../index/index.7b73d109.js";import{s as d}from"../../assets/index.755b2133.js";import{d as m,a2 as u,r as c,t as f,b,o as g,c as h,X as j,ab as y,ac as v,u as k,a as V,Q as w,H as _,F as x,V as D,n as F}from"../@vue/@vue.0c036a59.js";import"../lodash-es/lodash-es.6278a1be.js";import"../@vueuse/@vueuse.e440a3a6.js";import"../@popperjs/@popperjs.172738d4.js";import"../@ctrl/@ctrl.17547d95.js";import"../dayjs/dayjs.481ce33c.js";import"../axios/axios.d56fff3c.js";import"../async-validator/async-validator.234fb871.js";import"../memoize-one/memoize-one.f0fba034.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../@floating-ui/@floating-ui.50900a5c.js";/* empty css                                     */import"../pinia/pinia.46e48237.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-router/vue-router.fe365eba.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../@element-plus/@element-plus.4f9203c7.js";import"../js-cookie/js-cookie.431252a9.js";import"../nprogress/nprogress.491658f2.js";const z={class:"operate-wrapper"},H={class:"operate-left-btn"},M=D("新增"),Y=D("删除"),T={class:"operate-right-btn"},C=D("导入"),U=D("导出"),O=D("保存"),P=D("重置"),E=m({setup(m){const D=u({searchForm:{},formVisible:!1}),E=u({id:"",title:"",link:"",sort:""}),S=e=>{J.currentPage=1,D.searchForm=e,q()},q=async()=>{var e;J.data=await(e=D.searchForm,d({url:"menu",method:"get",params:e}))},A=c(),B=()=>{A.value.resetFields()},G=()=>{B(),E.id="",D.formVisible=!1},$=async()=>{var e,a;await A.value.validate(),E.id?await(e=E.id,a=E,d({url:`menu/${e}`,method:"patch",data:a})):await(e=>d({url:"menu",method:"post",data:e}))(E),q(),i({type:"success",message:E.id?"修改成功":"新增成功"}),G()},Q=e=>{D.formVisible=!0,F((()=>{E.id=e.id,E.title=e.title,E.link=e.link,E.sort=e.sort}))},X=({id:e})=>{r.confirm("确定删除该导航, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await(e=>d({url:`menu/${e}`,method:"delete"}))(e),q(),i({type:"success",message:"删除成功!"})})).catch((()=>{}))},I=u({onClickSearch:S,onClickClear:S,filters:[{type:o.input,key:"title",label:"导航名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),J=u({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!1,pageHandleFunc:"getTableData",column:[{label:"导航名",prop:"title"},{label:"链接",prop:"link"},{label:"排序",prop:"sort"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),K=u({title:[{required:!0,message:"请输入导航名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入导航链接",trigger:"blur"}]}),{formVisible:L}=f(D);return b((()=>{q()})),(i,r)=>{const o=e,d=p,m=a,u=l,c=t;return g(),h(x,null,[j(n,y(v(k(I))),null,16),V("div",z,[V("div",H,[j(o,{plain:"",onClick:r[0]||(r[0]=e=>L.value=!0)},{default:w((()=>[M])),_:1}),j(o,{plain:"",type:"danger"},{default:w((()=>[Y])),_:1})]),V("div",T,[j(o,{type:"primary"},{default:w((()=>[C])),_:1}),j(o,{type:"primary"},{default:w((()=>[U])),_:1})])]),j(d,{tableOpts:k(J),"onUpdate:tableOpts":r[1]||(r[1]=e=>_(J)?J.value=e:J=e),onGetTableData:q,onHandleEdit:Q,onHandleDel:X},null,8,["tableOpts"]),j(c,{title:(k(E).id?"编辑":"新增")+"导航",modelValue:k(L),"onUpdate:modelValue":r[6]||(r[6]=e=>_(L)?L.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":G},{default:w((()=>[j(k(s),{model:k(E),"status-icon":"",rules:k(K),ref_key:"formEle",ref:A,"label-width":"100px"},{default:w((()=>[j(u,{label:"导航标题：",prop:"title"},{default:w((()=>[j(m,{modelValue:k(E).title,"onUpdate:modelValue":r[2]||(r[2]=e=>k(E).title=e)},null,8,["modelValue"])])),_:1}),j(u,{label:"导航链接：",prop:"link"},{default:w((()=>[j(m,{modelValue:k(E).link,"onUpdate:modelValue":r[3]||(r[3]=e=>k(E).link=e)},null,8,["modelValue"])])),_:1}),j(u,{label:"排序：",prop:"sort"},{default:w((()=>[j(m,{modelValue:k(E).sort,"onUpdate:modelValue":r[4]||(r[4]=e=>k(E).sort=e)},null,8,["modelValue"])])),_:1}),j(u,null,{default:w((()=>[j(o,{type:"primary",onClick:$},{default:w((()=>[O])),_:1}),j(o,{onClick:r[5]||(r[5]=e=>B())},{default:w((()=>[P])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{E as default};
