import{d as e,N as a,P as l,as as t,at as i,au as r,av as s,aw as d,ar as n,o,c as p,a as u,aA as c,aB as m,u as f,e as b,w as g,R as h,aC as y,i as v,h as V,F as w,B as _,aD as F,a1 as k,a2 as x}from"./vendor.2df3944f.js";/* empty css                  *//* empty css                */import{G as C,F as D,_ as j}from"./index.3a537d10.js";import{c as H,a as M,b as Y,d as T}from"./article.bf0e3151.js";/* empty css                  */import"./index.348ad088.js";/* empty css                    */const I={class:"operate-wrapper"},N={class:"operate-left-btn"},P=_("新增"),S=_("删除"),B={class:"operate-right-btn"},O=_("导入"),U=_("导出"),A=_("保存"),E=_("重置"),q=e({setup(e){const _=a({searchForm:{limit:10,page:1,title:""},formVisible:!1,parentName:""}),q=a({id:"",title:"",parentId:0,grade:0}),z=e=>{$.currentPage=1,_.searchForm=e,G()},G=async()=>{_.searchForm.page=$.currentPage,_.searchForm.limit=$.pageSize;const{list:e,total:a}=await H(_.searchForm);$.data=e,$.total=a},R=l(),J=()=>{R.value.resetFields()},K=()=>{J(),q.id="",q.parentId=0,q.grade=0,_.parentName="",_.formVisible=!1},L=e=>{ae.value=!0,F((()=>{_.parentName=e.title,q.parentId=Number(e.id),q.grade=1}))},Q=async()=>{await R.value.validate(),q.id?await M(q.id,q):await Y(q),G(),k({type:"success",message:q.id?"修改成功":"新增成功"}),K()},W=e=>{_.formVisible=!0,F((()=>{q.id=e.id,q.title=e.title}))},X=({id:e})=>{x.confirm("确定删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await T(e),G(),k({type:"success",message:"删除成功!"})})).catch((()=>{}))},Z=a({onClickSearch:z,onClickClear:z,filters:[{type:C.input,key:"title",label:"分类名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),$=a({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"分类名",prop:"title"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"添加子分类",type:"primary",icon:"el-icon-edit",handleFunc:"handleCreate",isShow:e=>0===e.grade},{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),ee=a({parentId:[{required:!0}],title:[{required:!0,message:"请输入分类名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}),{formVisible:ae,parentName:le}=t(_);return i((()=>{G()})),(e,a)=>{const l=r,t=j,i=s,_=d,F=n;return o(),p(w,null,[u(D,c(m(f(Z))),null,16),b("div",I,[b("div",N,[u(l,{plain:"",onClick:a[0]||(a[0]=e=>ae.value=!0)},{default:g((()=>[P])),_:1}),u(l,{plain:"",type:"danger"},{default:g((()=>[S])),_:1})]),b("div",B,[u(l,{type:"primary"},{default:g((()=>[O])),_:1}),u(l,{type:"primary"},{default:g((()=>[U])),_:1})])]),u(t,{tableOpts:f($),"onUpdate:tableOpts":a[1]||(a[1]=e=>h($)?$.value=e:$=e),onGetTableData:G,onHandleCreate:L,onHandleEdit:W,onHandleDel:X},null,8,["tableOpts"]),u(F,{title:(f(q).id?"编辑":"新增")+"分类",modelValue:f(ae),"onUpdate:modelValue":a[5]||(a[5]=e=>h(ae)?ae.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":K},{default:g((()=>[u(f(y),{model:f(q),"status-icon":"",rules:f(ee),ref_key:"formEle",ref:R,"label-width":"100px"},{default:g((()=>[f(q).parentId?(o(),v(_,{key:0,label:"父级分类",prop:"parentId"},{default:g((()=>[u(i,{disabled:"",modelValue:f(le),"onUpdate:modelValue":a[2]||(a[2]=e=>h(le)?le.value=e:null)},null,8,["modelValue"])])),_:1})):V("",!0),u(_,{label:"分类名：",prop:"title"},{default:g((()=>[u(i,{modelValue:f(q).title,"onUpdate:modelValue":a[3]||(a[3]=e=>f(q).title=e)},null,8,["modelValue"])])),_:1}),u(_,null,{default:g((()=>[u(l,{type:"primary",onClick:Q},{default:g((()=>[A])),_:1}),u(l,{onClick:a[4]||(a[4]=e=>J())},{default:g((()=>[E])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{q as default};
