import{_ as e,d as a,r as t,e as l,o as s,c as r,l as o,w as n,L as i,M as d,f as p,u,N as c,m,h,n as b,b as y,I as f,O as k,G as g,y as w,A as v,B as O,P as S,z as x,x as V,Q as C,R as P,S as z,T as _,U as Y,V as F,W as M,X as D,Y as U}from"./index.83fac2ba.js";/* empty css                *//* empty css                  *//* empty css                    */var N=(e=>(e.input="input",e.select="simpleSelect",e.dateRange="dateRange",e.datetimeRange="datetimeRange",e.date="date",e.custom="custom",e))(N||{});const T={class:"search-wrapper"},B={class:"search-btn-list"};var H=e(a({props:{labelWidth:{type:Number,default:100},isShowClearBtn:{type:Boolean,default:!0},clearBtnText:{type:String,default:"清除条件"},searchBtnText:{type:String,default:"搜索"},onClickSearch:{type:Function,required:!0},onClickClear:{type:Function,required:!0},filters:{type:Array,required:!0}},setup(e){const a=e,C=t({}),P=t({}),z=l(new Date);a.filters.forEach((e=>{const a=e.key;C[a]=e.initialValue,e.validator&&(P[a]=e.validator)}));const _=l(),Y=async()=>{await _.value.validate()&&a.onClickSearch(C)},F=()=>{_.value.clearValidate(),a.filters.forEach((e=>{const a=e.key;C[a]=e.initialValue})),z.value=new Date,a.onClickClear(C)};return(a,t)=>{const l=w,M=v,D=O,U=S,H=x,$=V;return s(),r("div",T,[o(u(g),{ref_key:"searchForm",ref:_,rules:u(P),inline:!0,model:u(C),class:"search-form clearfix","label-width":`${e.labelWidth}px`},{default:n((()=>[(s(!0),r(i,null,d(e.filters,(e=>(s(),p(H,{key:e.key,label:e.label,class:b(e.className),prop:e.key},{default:n((()=>{var t,o;return[e.type===u(N).input?(s(),p(l,c({key:0,modelValue:u(C)[e.key],"onUpdate:modelValue":a=>u(C)[e.key]=a,placeholder:"请输入搜索内容",clearable:""},e.inputConfig),null,16,["modelValue","onUpdate:modelValue"])):m("",!0),e.type===u(N).select?(s(),p(D,c({key:1,modelValue:u(C)[e.key],"onUpdate:modelValue":a=>u(C)[e.key]=a,placeholder:"请选择",clearable:""},e.selectConfig),{default:n((()=>[e.isShowAll?(s(),p(M,{key:0,label:"全部",value:""})):m("",!0),e.getOptions?(s(!0),r(i,{key:1},d(e.getOptions(u(C)),(e=>(s(),p(M,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128)):(s(!0),r(i,{key:2},d(e.options,(e=>(s(),p(M,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):m("",!0),e.type===u(N).date?(s(),p(U,c({key:2,modelValue:u(C)[e.key],"onUpdate:modelValue":a=>u(C)[e.key]=a,type:"date",size:"default","value-format":null!=(t=e.filterParams)?t:"YYYY-MM-DD",placeholder:"选择日期"},e.dateConfig,{"default-value":z.value}),null,16,["modelValue","onUpdate:modelValue","value-format","default-value"])):m("",!0),e.type===u(N).dateRange?(s(),p(U,c({key:3,modelValue:u(C)[e.key],"onUpdate:modelValue":a=>u(C)[e.key]=a,type:"daterange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):m("",!0),e.type===u(N).datetimeRange?(s(),p(U,c({key:4,modelValue:u(C)[e.key],"onUpdate:modelValue":a=>u(C)[e.key]=a,type:"datetimerange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):m("",!0),e.type===u(N).custom?h(a.$slots,e.key,{key:5,slotValue:u(C)[e.key],item:e,change:(o=e.key,e=>{C[o]=e})},void 0,!0):m("",!0)]})),_:2},1032,["label","class","prop"])))),128)),y("div",B,[h(a.$slots,"operate-before",{},void 0,!0),o($,{type:"primary",class:"btn-primary",onClick:Y},{default:n((()=>[f(k(e.searchBtnText),1)])),_:1}),e.isShowClearBtn?(s(),p($,{key:0,type:"primary",class:"btn-search",onClick:F},{default:n((()=>[f(k(e.clearBtnText),1)])),_:1})):m("",!0),h(a.$slots,"operate-after",{},void 0,!0)])])),_:3},8,["rules","model","label-width"])])}}}),[["__scopeId","data-v-f094d2bc"]]);const $={formatTime:(e,a="YYYY-MM-DD HH:MM:ss")=>e?C(e).format(a):""};var R={filterFun:(e,a)=>$[a[0]](e,a[1])};const W={class:"table"},j={key:2},I={slot:"reference",class:"text-hidden"},L={key:4};var q=e(a({props:{tableOpts:{type:Object,default:()=>({currentPage:1,pageSize:10,total:0,data:[],column:[{hidden:!1,label:"",prop:"",width:"",minWidth:"",className:"",filterParams:[],showPopover:!1,emptyText:"",useSlot:!1,useHeaderSlot:!1}],indexes:["编号",60],hasOperation:!1,dynamic:!0,pagination:!0,pageList:null,pageHandleFunc:"",multipleTable:!1,multipleSelection:[],hideBorder:!1,spanMethod:()=>[1,1],operation:{label:"操作",width:"200",minWidth:"",className:"show",data:[{label:"通过",handleFunc:"handleSubmit",size:"mini",className:"show",type:"primary",icon:"",isShow:e=>"show"===e.status,dataTestId:""}]}})}},emits:["handleEdit","handleRestPwd","handlePermission","handleDel","getTableData","handleCreate"],setup(e,{emit:a}){const t=e,c=e=>{t.tableOpts.pageSize=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},g=l(null);P((()=>{g.value.doLayout()}));const w=e=>{t.tableOpts.currentPage=e,t.tableOpts.pageHandleFunc&&a(t.tableOpts.pageHandleFunc)},v=e=>{t.tableOpts.multipleSelection=e};return(t,l)=>{const O=F,S=M,x=V,C=D,P=U;return s(),r("div",W,[o(C,{ref_key:"table",ref:g,data:e.tableOpts.dynamic?e.tableOpts.data:e.tableOpts.data.slice((e.tableOpts.currentPage-1)*e.tableOpts.pageSize,e.tableOpts.currentPage*e.tableOpts.pageSize),border:!e.tableOpts.hideBorder,"span-method":e.tableOpts.spanMethod,"row-key":"id","child-key":e.tableOpts.rowKey,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},onSelectionChange:v},{default:n((()=>[e.tableOpts.multipleTable?(s(),p(O,{key:0,type:"selection","class-name":"multiple-column",width:"45"})):m("",!0),e.tableOpts.indexes?(s(),p(O,{key:1,type:"index",label:e.tableOpts.indexes[0],"class-name":"serial-number",width:e.tableOpts.indexes[1]||60},null,8,["label","width"])):m("",!0),(s(!0),r(i,null,d(e.tableOpts.column,((e,a)=>(s(),r(i,null,[e.hidden?m("",!0):(s(),p(O,{key:a,label:e.label,prop:e.prop,"class-name":e.className||"",width:e.width||"","min-width":e.minWidth||"",align:"center"},{header:n((a=>[e.useHeaderSlot?h(t.$slots,e.prop+"Header",{key:0,data:a,column:e},void 0,!0):(s(),r(i,{key:1},[f(k(e.label),1)],64))])),default:n((a=>[e.useSlot?h(t.$slots,e.prop,{key:0,data:a.row,index:a.$index,value:a.row[e.prop],column:e},void 0,!0):e.render?(s(),r(i,{key:1},[f(k(e.render(a.row[e.prop],a.$index,a.row)),1)],64)):e.filterParams?(s(),r("span",j,k(u(R).filterFun(a.row[e.prop],e.filterParams)),1)):e.showPopover&&a.row[e.prop]&&a.row[e.prop].length>20?(s(),p(S,{key:3,placement:"bottom-start",width:"200",trigger:"hover",content:a.row[e.prop]},{default:n((()=>[y("div",I,k(a.row[e.prop]),1)])),_:2},1032,["content"])):(s(),r("span",L,k(a.row[e.prop]),1))])),_:2},1032,["label","prop","class-name","width","min-width"]))],64)))),256)),e.tableOpts.hasOperation?(s(),p(O,{key:2,fixed:"right",label:e.tableOpts.operation.label,width:e.tableOpts.operation.width||"","min-width":e.tableOpts.operation.minWidth||"","class-name":e.tableOpts.operation.className||""},{default:n((t=>[(s(!0),r(i,null,d(e.tableOpts.operation.data,(e=>(s(),r(i,null,[!e.isShow||e.isShow(t.row)?(s(),p(x,{key:e.id,type:e.type||"text",size:e.size||"default",class:b(e.classNameFun?e.classNameFun(t.row):e.className||""),onClick:z((l=>{return s=e.handleFunc,r=t.row,o=t.$index,void a(s,r,o);var s,r,o}),["stop"])},{default:n((()=>[f(k(e.label),1)])),_:2},1032,["type","size","class","onClick"])):m("",!0)],64)))),256))])),_:1},8,["label","width","min-width","class-name"])):m("",!0)])),_:3},8,["data","border","span-method","child-key"]),e.tableOpts.pagination?_((s(),p(P,{key:0,currentPage:e.tableOpts.currentPage,"onUpdate:currentPage":l[0]||(l[0]=a=>e.tableOpts.currentPage=a),background:"","page-sizes":e.tableOpts.pageList||[10,20,30,40],"page-size":e.tableOpts.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableOpts.total,onSizeChange:c,onCurrentChange:w},null,8,["currentPage","page-sizes","page-size","total"])),[[Y,e.tableOpts.total]]):m("",!0)])}}}),[["__scopeId","data-v-01b3cc62"]]);export{H as F,N as G,q as _};
