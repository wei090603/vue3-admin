import{d as e,at as a,P as l,N as t,au as s,aS as o,av as u,aw as r,ax as d,ay as n,aC as i,ar as p,o as c,c as m,e as v,a as f,w as y,t as b,u as _,i as V,h as k,B as h,aD as x,a1 as w,a2 as g}from"./vendor.2df3944f.js";/* empty css                  *//* empty css                *//* empty css                  *//* empty css                    */import{_ as C}from"./index.348ad088.js";const j={class:"warpper"},U={class:"operate clearfix"},B={class:"operate-btn-list"},q=h("新增资源"),D=h("删除选中"),F=h("导入"),I=h("导出"),L={class:"custom-tree-node"},P=h("添加资源"),T=h("编辑资源"),E=h("删除资源"),N=h("保存"),S=h("重置");var z=C(e({setup(e){a((()=>{C()}));const h=l([]),C=async()=>{h.value=await resourcesList()},z=l(null),A=()=>{z.value.resetFields(),O.value=""},G=()=>{A(),H.value=!1},H=l(!1),J=t({parent:"",title:"",path:"",icon:"",type:"menu"}),K=t({title:[{required:!0,message:"请输入资源名称",trigger:"blur"}],path:[{required:!0,message:"请输入资源路径",trigger:"blur"}]}),M=l(""),O=l(""),Q=async()=>{var e;!0===await(null==(e=z.value)?void 0:e.validate())&&(O.value?(await resourcesPatch(O.value,J),C(),H.value=!1,w({type:"success",message:"修改成功"})):(await resourcesCreate(J),C(),H.value=!1,A(),w({type:"success",message:"新增成功"})))};return(e,a)=>{const l=s,t=o,C=u,R=r,W=d,X=n,Y=i,Z=p;return c(),m("div",j,[v("div",U,[v("div",B,[f(l,{type:"primary",class:"btn-plain",onClick:a[0]||(a[0]=e=>H.value=!0)},{default:y((()=>[q])),_:1}),f(l,{type:"primary",class:"btn-plain"},{default:y((()=>[D])),_:1}),f(l,{type:"primary",class:"btn-plain r"},{default:y((()=>[F])),_:1}),f(l,{type:"primary",class:"btn-plain r"},{default:y((()=>[I])),_:1})])]),f(t,{data:h.value,"show-checkbox":"","node-key":"id",props:{label:"title"},"default-expand-all":"","expand-on-click-node":!1},{default:y((({node:e,data:a})=>[v("span",L,[v("span",null,b(e.label),1),v("span",null,[f(l,{type:"text",onClick:e=>{return l=a,M.value=l.title,J.parent=l.id,void(H.value=!0);var l}},{default:y((()=>[P])),_:2},1032,["onClick"]),f(l,{type:"text",onClick:e=>{return l=a,H.value=!0,O.value=l.id,void x((()=>{for(let e in J)J[e]=l[e]}));var l}},{default:y((()=>[T])),_:2},1032,["onClick"]),f(l,{class:"notice-text-color",type:"text",onClick:e=>(async({id:e})=>{g.confirm("确定删除该资源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await resourcesDelete(e),w({type:"success",message:"删除成功!"})})).catch((()=>{}))})(a)},{default:y((()=>[E])),_:2},1032,["onClick"])])])])),_:1},8,["data"]),f(Z,{title:(O.value?"编辑":"新增")+"资源",modelValue:H.value,"onUpdate:modelValue":a[6]||(a[6]=e=>H.value=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":G},{default:y((()=>[f(Y,{ref_key:"formEle",ref:z,model:_(J),rules:_(K),"label-width":"100px",class:"demo-resourceForm"},{default:y((()=>[_(J).parent?(c(),V(R,{key:0,label:"父对象",prop:"parentLable"},{default:y((()=>[f(C,{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),disabled:""},null,8,["modelValue"])])),_:1})):k("",!0),f(R,{label:"资源名称",prop:"title"},{default:y((()=>[f(C,{modelValue:_(J).title,"onUpdate:modelValue":a[2]||(a[2]=e=>_(J).title=e)},null,8,["modelValue"])])),_:1}),f(R,{label:"资源路由",prop:"path"},{default:y((()=>[f(C,{modelValue:_(J).path,"onUpdate:modelValue":a[3]||(a[3]=e=>_(J).path=e)},null,8,["modelValue"])])),_:1}),f(R,{label:"Icon",prop:"icon"},{default:y((()=>[f(C,{modelValue:_(J).icon,"onUpdate:modelValue":a[4]||(a[4]=e=>_(J).icon=e)},null,8,["modelValue"])])),_:1}),f(R,{label:"菜单/按钮",prop:"type"},{default:y((()=>[f(X,{modelValue:_(J).type,"onUpdate:modelValue":a[5]||(a[5]=e=>_(J).type=e),placeholder:"资源类型"},{default:y((()=>[f(W,{label:"菜单",value:"menu"}),f(W,{label:"按钮",value:"button"})])),_:1},8,["modelValue"])])),_:1}),f(R,null,{default:y((()=>[f(l,{type:"primary",onClick:Q},{default:y((()=>[N])),_:1}),f(l,{onClick:A},{default:y((()=>[S])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-1a7f53e5"]]);export{z as default};
