import{k as e,d as n,t,e as o,v as i,a4 as a,R as r,a5 as l,a6 as s,J as u,_ as c,r as d,a7 as p,o as f,c as m,l as g,u as v,H as y}from"./index.83fac2ba.js";var b,h=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],C=function(e){return-1!==h.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},S=function(n,t,o,i,a,r){i.setContent(r()),o.attrs["onUpdate:modelValue"]&&function(n,t,o,i){var a=n.modelEvents?n.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;e(i,(function(e,t){o&&"string"==typeof e&&e!==t&&e!==o.getContent({format:n.outputFormat})&&o.setContent(e)})),o.on(r||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:n.outputFormat}))}))}(t,o,i,a),function(e,n,t){Object.keys(n).filter(C).forEach((function(o){var i=n[o];"function"==typeof i&&("onInit"===o?i(e,t):t.on(o.substring(2),(function(e){return i(e,t)})))}))}(n,o.attrs,i)},k=0,w=function(e){var n=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++k+String(n)},x=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},A=function(){return{listeners:[],scriptId:w("tiny-script"),scriptLoaded:!1}},D=(b=A(),{load:function(e,n,t){b.scriptLoaded?t():(b.listeners.push(t),e.getElementById(b.scriptId)||function(e,n,t,o){var i=n.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=e,i.src=t;var a=function(){i.removeEventListener("load",a),o()};i.addEventListener("load",a),n.head&&n.head.appendChild(i)}(b.scriptId,e,n,(function(){b.listeners.forEach((function(e){return e()})),b.scriptLoaded=!0})))},reinitialize:function(){b=A()}}),_=function(){var e="undefined"!=typeof window?window:global;return e&&e.tinymce?e.tinymce:null},j={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},V=globalThis&&globalThis.__assign||function(){return V=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},V.apply(this,arguments)},E=n({props:j,setup:function(n,c){var d=n.init?V({},n.init):{},p=t(n),f=p.disabled,m=p.modelValue,g=p.tagName,v=o(null),y=null,b=n.id||w("tiny-vue"),h=n.init&&n.init.inline||n.inline,C=!!c.attrs["onUpdate:modelValue"],k=!0,A=n.initialValue?n.initialValue:"",j="",E=function(){var e,t,o,i=(e=k,C?function(){return(null==m?void 0:m.value)?m.value:""}:function(){return e?A:j}),a=V(V({},d),{readonly:n.disabled,selector:"#"+b,plugins:(t=d.plugins,o=n.plugins,x(t).concat(x(o))),toolbar:n.toolbar||d.toolbar,inline:h,setup:function(e){y=e,e.on("init",(function(t){return S(t,n,c,e,m,i)})),"function"==typeof d.setup&&d.setup(e)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(v.value)&&(v.value.style.visibility=""),_().init(a),k=!1};e(f,(function(e){var n;null!==y&&("function"==typeof(null===(n=y.mode)||void 0===n?void 0:n.set)?y.mode.set(e?"readonly":"design"):y.setMode(e?"readonly":"design"))})),e(g,(function(e){var n;C||(j=y.getContent()),null===(n=_())||void 0===n||n.remove(y),u((function(){return E()}))})),i((function(){if(null!==_())E();else if(v.value&&v.value.ownerDocument){var e=n.cloudChannel?n.cloudChannel:"5",t=n.apiKey?n.apiKey:"no-api-key",o=null==n.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+e+"/tinymce.min.js":n.tinymceScriptSrc;D.load(v.value.ownerDocument,o,E)}})),a((function(){null!==_()&&_().remove(y)})),h||(r((function(){k||E()})),l((function(){var e;C||(j=y.getContent()),null===(e=_())||void 0===e||e.remove(y)})));return c.expose({rerender:function(e){var n;j=y.getContent(),null===(n=_())||void 0===n||n.remove(y),d=V(V({},d),e),u((function(){return E()}))}}),function(){return h?function(e,n,t,o){return e(o||"div",{id:n,ref:t})}(s,b,v,n.tagName):s("textarea",{id:b,visibility:"hidden",ref:v})}}});const M={class:"tinymce-boxz"},U=n({props:{content:{type:String,default:""}},emits:["update:content"],setup(n,{emit:o}){const i=n;e((()=>i.content),(e=>{a.editorValue=e}));const a=d({editorValue:i.content,apiKey:"qagffr3pkuv17a8on1afax661irst1hbr4e6tbv888sz91jc",init:{language:"zh_CN",placeholder:"在这里输入文字",min_width:320,min_height:220,height:500,resize:"both",branding:!1,font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",plugins:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount textpattern autosave emoticons",toolbar:["fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | blockquote subscript superscript removeformat ","styleselect formatselect fontselect fontsizeselect |  table image axupimgs media emoticons charmap hr pagebreak insertdatetime  selectall visualblocks searchreplace | code print preview | indent2em lineheight formatpainter"],paste_data_images:!0,images_upload_handler:(e,n,t)=>{let o=new FileReader;o.readAsDataURL(e.blob()),o.onloadend=function(){const e=o.result;n(e)}},file_picker_types:"file image media",file_picker_callback:function(e,n,t){let o;o="image"==t.filetype?".jpg, .jpeg, .png, .gif, .ico, .svg":"media"==t.filetype?".mp3, .mp4, .avi, .mov":".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4, .jpg, .jpeg, .png, .gif, .ico, .svg";let i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept",o),i.click(),i.onchange=()=>{let n=i.files[0],t=new FileReader;t.readAsDataURL(n),t.onload=function(){let o="blobid"+(new Date).getTime(),i=tinymce.activeEditor.editorUpload.blobCache,a=t.result.split(",")[1],r=i.create(o,n,a);i.add(r),e(r.blobUri(),{title:n.name})}}}}});p((()=>{o("update:content",a.editorValue)}));const{init:r,apiKey:l,editorValue:s}=t(a);return(e,n)=>(f(),m("div",M,[g(v(E),{modelValue:v(s),"onUpdate:modelValue":n[0]||(n[0]=e=>y(s)?s.value=e:null),"api-key":v(l),init:v(r)},null,8,["modelValue","api-key","init"])]))}});var O=c(U,[["__scopeId","data-v-7b22462c"]]);export{O as T};
