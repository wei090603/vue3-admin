import{s as e,d as a,r as l,e as t,t as i,v as s,x as r,y as o,z as n,q as d,o as u,c as p,l as m,D as c,F as b,u as f,b as g,w as h,H as y,G as k,L as V,I as _,E as v,J as w,K as x}from"./index.83fac2ba.js";/* empty css                  *//* empty css                */import{G as D,F,_ as H}from"./index.d9bd8e3f.js";/* empty css                  *//* empty css                    */const M={class:"operate-wrapper"},Y={class:"operate-left-btn"},T=_("新增"),j=_("删除"),C={class:"operate-right-btn"},U=_("导入"),E=_("导出"),O=_("保存"),P=_("重置"),q=a({setup(a){const _=l({searchForm:{},formVisible:!1}),q=l({id:"",title:"",link:"",sort:""}),G=e=>{L.currentPage=1,_.searchForm=e,S()},S=async()=>{var a;L.data=await(a=_.searchForm,e({url:"menu",method:"get",params:a}))},z=t(),A=()=>{z.value.resetFields()},B=()=>{A(),q.id="",_.formVisible=!1},$=async()=>{var a,l;await z.value.validate(),q.id?await(a=q.id,l=q,e({url:`menu/${a}`,method:"patch",data:l})):await(a=>e({url:"menu",method:"post",data:a}))(q),S(),v({type:"success",message:q.id?"修改成功":"新增成功"}),B()},I=e=>{_.formVisible=!0,w((()=>{q.id=e.id,q.title=e.title,q.link=e.link,q.sort=e.sort}))},J=({id:a})=>{x.confirm("确定删除该导航, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await(a=>e({url:`menu/${a}`,method:"delete"}))(a),S(),v({type:"success",message:"删除成功!"})})).catch((()=>{}))},K=l({onClickSearch:G,onClickClear:G,filters:[{type:D.input,key:"title",label:"导航名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),L=l({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!1,pageHandleFunc:"getTableData",column:[{label:"导航名",prop:"title"},{label:"链接",prop:"link"},{label:"排序",prop:"sort"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),N=l({title:[{required:!0,message:"请输入导航名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入导航链接",trigger:"blur"}]}),{formVisible:Q}=i(_);return s((()=>{S()})),(e,a)=>{const l=r,t=H,i=o,s=n,_=d;return u(),p(V,null,[m(F,c(b(f(K))),null,16),g("div",M,[g("div",Y,[m(l,{plain:"",onClick:a[0]||(a[0]=e=>Q.value=!0)},{default:h((()=>[T])),_:1}),m(l,{plain:"",type:"danger"},{default:h((()=>[j])),_:1})]),g("div",C,[m(l,{type:"primary"},{default:h((()=>[U])),_:1}),m(l,{type:"primary"},{default:h((()=>[E])),_:1})])]),m(t,{tableOpts:f(L),"onUpdate:tableOpts":a[1]||(a[1]=e=>y(L)?L.value=e:L=e),onGetTableData:S,onHandleEdit:I,onHandleDel:J},null,8,["tableOpts"]),m(_,{title:(f(q).id?"编辑":"新增")+"导航",modelValue:f(Q),"onUpdate:modelValue":a[6]||(a[6]=e=>y(Q)?Q.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":B},{default:h((()=>[m(f(k),{model:f(q),"status-icon":"",rules:f(N),ref_key:"formEle",ref:z,"label-width":"100px"},{default:h((()=>[m(s,{label:"导航标题：",prop:"title"},{default:h((()=>[m(i,{modelValue:f(q).title,"onUpdate:modelValue":a[2]||(a[2]=e=>f(q).title=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"导航链接：",prop:"link"},{default:h((()=>[m(i,{modelValue:f(q).link,"onUpdate:modelValue":a[3]||(a[3]=e=>f(q).link=e)},null,8,["modelValue"])])),_:1}),m(s,{label:"排序：",prop:"sort"},{default:h((()=>[m(i,{modelValue:f(q).sort,"onUpdate:modelValue":a[4]||(a[4]=e=>f(q).sort=e)},null,8,["modelValue"])])),_:1}),m(s,null,{default:h((()=>[m(l,{type:"primary",onClick:$},{default:h((()=>[O])),_:1}),m(l,{onClick:a[5]||(a[5]=e=>A())},{default:h((()=>[P])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{q as default};
