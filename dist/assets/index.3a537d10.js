import{d as e,N as a,P as t,o as l,c as s,a as o,w as r,F as n,l as d,i,u as p,m as u,h as c,k as m,n as h,e as b,B as y,t as f,aC as k,av as g,ax as w,ay as v,aE as O,aw as x,au as C,aF as S,aG as V,W as P,aa as z,ab as _,aH as F,aI as Y,aJ as D,aK as M}from"./vendor.2df3944f.js";/* empty css                *//* empty css                  */import{_ as H}from"./index.348ad088.js";/* empty css                    */var N=(e=>(e.input="input",e.select="simpleSelect",e.dateRange="dateRange",e.datetimeRange="datetimeRange",e.date="date",e.custom="custom",e))(N||{});const U={class:"search-wrapper"},B={class:"search-btn-list"};var T=H(e({props:{labelWidth:{type:Number,default:100},isShowClearBtn:{type:Boolean,default:!0},clearBtnText:{type:String,default:"清除条件"},searchBtnText:{type:String,default:"搜索"},onClickSearch:{type:Function,required:!0},onClickClear:{type:Function,required:!0},filters:{type:Array,required:!0}},setup(e){const S=e,V=a({}),P=a({}),z=t(new Date);S.filters.forEach((e=>{const a=e.key;V[a]=e.initialValue,e.validator&&(P[a]=e.validator)}));const _=t(),F=async()=>{await _.value.validate()&&S.onClickSearch(V)},Y=()=>{_.value.clearValidate(),S.filters.forEach((e=>{const a=e.key;V[a]=e.initialValue})),z.value=new Date,S.onClickClear(V)};return(a,t)=>{const S=g,D=w,M=v,H=O,T=x,$=C;return l(),s("div",U,[o(p(k),{ref_key:"searchForm",ref:_,rules:p(P),inline:!0,model:p(V),class:"search-form clearfix","label-width":`${e.labelWidth}px`},{default:r((()=>[(l(!0),s(n,null,d(e.filters,(e=>(l(),i(T,{key:e.key,label:e.label,class:h(e.className),prop:e.key},{default:r((()=>{var t,o;return[e.type===p(N).input?(l(),i(S,u({key:0,modelValue:p(V)[e.key],"onUpdate:modelValue":a=>p(V)[e.key]=a,placeholder:"请输入搜索内容",clearable:""},e.inputConfig),null,16,["modelValue","onUpdate:modelValue"])):c("",!0),e.type===p(N).select?(l(),i(M,u({key:1,modelValue:p(V)[e.key],"onUpdate:modelValue":a=>p(V)[e.key]=a,placeholder:"请选择",clearable:""},e.selectConfig),{default:r((()=>[e.isShowAll?(l(),i(D,{key:0,label:"全部",value:""})):c("",!0),e.getOptions?(l(!0),s(n,{key:1},d(e.getOptions(p(V)),(e=>(l(),i(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128)):(l(!0),s(n,{key:2},d(e.options,(e=>(l(),i(D,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):c("",!0),e.type===p(N).date?(l(),i(H,u({key:2,modelValue:p(V)[e.key],"onUpdate:modelValue":a=>p(V)[e.key]=a,type:"date",size:"default","value-format":null!=(t=e.filterParams)?t:"YYYY-MM-DD",placeholder:"选择日期"},e.dateConfig,{"default-value":z.value}),null,16,["modelValue","onUpdate:modelValue","value-format","default-value"])):c("",!0),e.type===p(N).dateRange?(l(),i(H,u({key:3,modelValue:p(V)[e.key],"onUpdate:modelValue":a=>p(V)[e.key]=a,type:"daterange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):c("",!0),e.type===p(N).datetimeRange?(l(),i(H,u({key:4,modelValue:p(V)[e.key],"onUpdate:modelValue":a=>p(V)[e.key]=a,type:"datetimerange",size:"default","value-format":e.filterParams?e.filterParams:"YYYY-MM-DD","start-placeholder":"开始日期","end-placeholder":"结束日期"},e.dateConfig),null,16,["modelValue","onUpdate:modelValue","value-format"])):c("",!0),e.type===p(N).custom?m(a.$slots,e.key,{key:5,slotValue:p(V)[e.key],item:e,change:(o=e.key,e=>{V[o]=e})},void 0,!0):c("",!0)]})),_:2},1032,["label","class","prop"])))),128)),b("div",B,[m(a.$slots,"operate-before",{},void 0,!0),o($,{type:"primary",class:"btn-primary",onClick:F},{default:r((()=>[y(f(e.searchBtnText),1)])),_:1}),e.isShowClearBtn?(l(),i($,{key:0,type:"primary",class:"btn-search",onClick:Y},{default:r((()=>[y(f(e.clearBtnText),1)])),_:1})):c("",!0),m(a.$slots,"operate-after",{},void 0,!0)])])),_:3},8,["rules","model","label-width"])])}}}),[["__scopeId","data-v-3dd2a700"]]);const $={formatTime:(e,a="YYYY-MM-DD HH:MM:ss")=>e?S(e).format(a):""};var j={filterFun:(e,a)=>$[a[0]](e,a[1])};const R={class:"table"},W={key:2},E={slot:"reference",class:"text-hidden"},I={key:4};var q=H(e({props:{tableOpts:{type:Object,default:()=>({currentPage:1,pageSize:10,total:0,data:[],column:[{hidden:!1,label:"",prop:"",width:"",minWidth:"",className:"",filterParams:[],showPopover:!1,emptyText:"",useSlot:!1,useHeaderSlot:!1}],indexes:["编号",60],hasOperation:!1,dynamic:!0,pagination:!0,pageList:null,pageHandleFunc:"",multipleTable:!1,multipleSelection:[],hideBorder:!1,spanMethod:()=>[1,1],operation:{label:"操作",width:"200",minWidth:"",className:"show",data:[{label:"通过",handleFunc:"handleSubmit",size:"mini",className:"show",type:"primary",icon:"",isShow:e=>"show"===e.status,dataTestId:""}]}})}},emits:["handleEdit","handleRestPwd","handlePermission","handleDel","getTableData","handleCreate"],setup(e,{emit:a}){const u=e,k=e=>{u.tableOpts.pageSize=e,u.tableOpts.pageHandleFunc&&a(u.tableOpts.pageHandleFunc)},g=t(null);V((()=>{g.value.doLayout()}));const w=e=>{u.tableOpts.currentPage=e,u.tableOpts.pageHandleFunc&&a(u.tableOpts.pageHandleFunc)},v=e=>{u.tableOpts.multipleSelection=e};return(t,u)=>{const O=F,x=Y,S=C,V=D,H=M;return l(),s("div",R,[o(V,{ref_key:"table",ref:g,data:e.tableOpts.dynamic?e.tableOpts.data:e.tableOpts.data.slice((e.tableOpts.currentPage-1)*e.tableOpts.pageSize,e.tableOpts.currentPage*e.tableOpts.pageSize),border:!e.tableOpts.hideBorder,"span-method":e.tableOpts.spanMethod,"row-key":"id",aa:e.tableOpts.rowKey,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},style:{width:"100%"},onSelectionChange:v},{default:r((()=>[e.tableOpts.multipleTable?(l(),i(O,{key:0,type:"selection","class-name":"multiple-column",width:"45"})):c("",!0),e.tableOpts.indexes?(l(),i(O,{key:1,type:"index",label:e.tableOpts.indexes[0],"class-name":"serial-number",width:e.tableOpts.indexes[1]||60},null,8,["label","width"])):c("",!0),(l(!0),s(n,null,d(e.tableOpts.column,((e,a)=>(l(),s(n,null,[e.hidden?c("",!0):(l(),i(O,{key:a,label:e.label,prop:e.prop,"class-name":e.className||"",width:e.width||"","min-width":e.minWidth||"",align:"center"},{header:r((a=>[e.useHeaderSlot?m(t.$slots,e.prop+"Header",{key:0,data:a,column:e},void 0,!0):(l(),s(n,{key:1},[y(f(e.label),1)],64))])),default:r((a=>[e.useSlot?m(t.$slots,e.prop,{key:0,data:a.row,index:a.$index,value:a.row[e.prop],column:e},void 0,!0):e.render?(l(),s(n,{key:1},[y(f(e.render(a.row[e.prop],a.$index,a.row)),1)],64)):e.filterParams?(l(),s("span",W,f(p(j).filterFun(a.row[e.prop],e.filterParams)),1)):e.showPopover&&a.row[e.prop]&&a.row[e.prop].length>20?(l(),i(x,{key:3,placement:"bottom-start",width:"200",trigger:"hover",content:a.row[e.prop]},{default:r((()=>[b("div",E,f(a.row[e.prop]),1)])),_:2},1032,["content"])):(l(),s("span",I,f(a.row[e.prop]),1))])),_:2},1032,["label","prop","class-name","width","min-width"]))],64)))),256)),e.tableOpts.hasOperation?(l(),i(O,{key:2,fixed:"right",label:e.tableOpts.operation.label,width:e.tableOpts.operation.width||"","min-width":e.tableOpts.operation.minWidth||"","class-name":e.tableOpts.operation.className||""},{default:r((t=>[(l(!0),s(n,null,d(e.tableOpts.operation.data,(e=>(l(),s(n,null,[!e.isShow||e.isShow(t.row)?(l(),i(S,{key:e.id,type:e.type||"text",size:e.size||"default",class:h(e.classNameFun?e.classNameFun(t.row):e.className||""),onClick:P((l=>{return s=e.handleFunc,o=t.row,r=t.$index,void a(s,o,r);var s,o,r}),["stop"])},{default:r((()=>[y(f(e.label),1)])),_:2},1032,["type","size","class","onClick"])):c("",!0)],64)))),256))])),_:1},8,["label","width","min-width","class-name"])):c("",!0)])),_:3},8,["data","border","span-method","aa"]),e.tableOpts.pagination?z((l(),i(H,{key:0,currentPage:e.tableOpts.currentPage,"onUpdate:currentPage":u[0]||(u[0]=a=>e.tableOpts.currentPage=a),background:"","page-sizes":e.tableOpts.pageList||[10,20,30,40],"page-size":e.tableOpts.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableOpts.total,onSizeChange:k,onCurrentChange:w},null,8,["currentPage","page-sizes","page-size","total"])),[[_,e.tableOpts.total]]):c("",!0)])}}}),[["__scopeId","data-v-2838e9cb"]]);export{T as F,N as G,q as _};
