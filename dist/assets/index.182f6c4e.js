import{d as e,N as a,P as l,as as t,at as s,au as i,av as r,aw as n,ar as o,o as d,c as m,a as c,aA as p,aB as u,u as f,e as b,w as g,R as y,aC as h,F as v,B as w,a1 as _,aD as F,a2 as V}from"./vendor.2df3944f.js";/* empty css                  *//* empty css                */import{G as x,F as k,_ as D}from"./index.3a537d10.js";import{t as j,e as M,f as Y,g as C}from"./article.bf0e3151.js";/* empty css                  */import"./index.348ad088.js";/* empty css                    */const H={class:"operate-wrapper"},T={class:"operate-left-btn"},P=w("新增"),B=w("删除"),O={class:"operate-right-btn"},S=w("导入"),A=w("导出"),E=w("保存"),U=w("重置"),z=e({setup(e){const w=a({searchForm:{limit:10,page:1,name:""},formVisible:!1}),z=a({id:"",name:""}),G=e=>{W.currentPage=1,w.searchForm=e,q()},q=async()=>{w.searchForm.page=W.currentPage,w.searchForm.limit=W.pageSize;const{list:e,total:a}=await j(w.searchForm);W.data=e,W.total=a},N=l(),R=()=>{N.value.resetFields(),z.id=""},I=()=>{R(),w.formVisible=!1},J=async()=>{await N.value.validate(),z.id?await M(z.id,z):await Y(z),q(),_({type:"success",message:z.id?"修改成功":"新增成功"}),I()},K=e=>{w.formVisible=!0,F((()=>{z.id=e.id,z.name=e.name}))},L=({id:e})=>{V.confirm("确定删除该标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await C(e),q(),_({type:"success",message:"删除成功!"})})).catch((()=>{}))},Q=a({onClickSearch:G,onClickClear:G,filters:[{type:x.input,key:"name",label:"标签名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),W=a({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"标签名",prop:"name"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),X=a({name:[{required:!0,message:"请输入标签名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}),{formVisible:Z}=t(w);return s((()=>{q()})),(e,a)=>{const l=i,t=D,s=r,w=n,_=o;return d(),m(v,null,[c(k,p(u(f(Q))),null,16),b("div",H,[b("div",T,[c(l,{plain:"",onClick:a[0]||(a[0]=e=>Z.value=!0)},{default:g((()=>[P])),_:1}),c(l,{plain:"",type:"danger"},{default:g((()=>[B])),_:1})]),b("div",O,[c(l,{type:"primary"},{default:g((()=>[S])),_:1}),c(l,{type:"primary"},{default:g((()=>[A])),_:1})])]),c(t,{tableOpts:f(W),"onUpdate:tableOpts":a[1]||(a[1]=e=>y(W)?W.value=e:W=e),onGetTableData:q,onHandleEdit:K,onHandleDel:L},null,8,["tableOpts"]),c(_,{title:(f(z).id?"编辑":"新增")+"标签",modelValue:f(Z),"onUpdate:modelValue":a[4]||(a[4]=e=>y(Z)?Z.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":I},{default:g((()=>[c(f(h),{model:f(z),"status-icon":"",rules:f(X),ref_key:"formEle",ref:N,"label-width":"100px"},{default:g((()=>[c(w,{label:"标签名：",prop:"name"},{default:g((()=>[c(s,{modelValue:f(z).name,"onUpdate:modelValue":a[2]||(a[2]=e=>f(z).name=e)},null,8,["modelValue"])])),_:1}),c(w,null,{default:g((()=>[c(l,{type:"primary",onClick:J},{default:g((()=>[E])),_:1}),c(l,{onClick:a[3]||(a[3]=e=>R())},{default:g((()=>[U])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{z as default};
