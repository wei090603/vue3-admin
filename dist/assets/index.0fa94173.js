import{d as e,P as a,N as l,at as t,as as r,au as s,av as o,aw as i,ar as d,o as m,c as n,a as u,aA as p,aB as c,u as b,e as f,w as g,aC as y,R as h,F as k,B as v,a1 as V}from"./vendor.2df3944f.js";/* empty css                  *//* empty css                */import{G as _,F,_ as w}from"./index.3a537d10.js";import{r as N,a as j}from"./roles.f27cdac5.js";/* empty css                  */import"./index.348ad088.js";/* empty css                    */const x={class:"operate-wrapper"},C={class:"operate-left-btn"},D=v("新增"),P=v("删除"),M={class:"operate-right-btn"},S=v("导入"),T=v("导出"),U={class:"table-container"},W=v("保存"),Y=v("重置"),A=e({setup(e){const v=a(),A=l({rolesData:[],searchForm:{limit:10,page:1},formVisible:!1}),H=async()=>{A.searchForm.page=I.currentPage,A.searchForm.limit=I.pageSize;const{list:e,total:a}=await N(A.searchForm);I.data=e,I.total=a},O=()=>{v.value.resetFields()},q=()=>{O(),A.formVisible=!1},z=e=>{},B=l({id:"",mark:"",roleName:"",remark:""}),E=l({roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],mark:[{required:!0,message:"请输入角色标识",trigger:"blur"}]}),G=async()=>{var e,a;await(null==(e=v.value)?void 0:e.validate());!0===await(null==(a=v.value)?void 0:a.validate())&&(B.id?(H(),J.value=!1,V({type:"success",message:"修改成功"})):(await j(B),H(),J.value=!1,O(),V({type:"success",message:"新增成功"})))},R=l({onClickSearch:z,onClickClear:z,filters:[{type:_.input,key:"roleName",label:"角色名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]},{type:_.date,key:"createdAt",label:"创建时间：",className:"date-range",initialValue:""}]}),I=l({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"角色名",prop:"roleName",minWidth:"80"},{label:"标识",prop:"mark",minWidth:"80"},{label:"备注",prop:"remark",minWidth:"80"},{label:"创建日期",prop:"createdAt",minWidth:"80",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"分配权限",type:"primary",icon:"el-icon-message",handleFunc:"handlePermission"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDelete"}]}});t((()=>{H()}));const{formVisible:J}=r(A);return(e,a)=>{const l=s,t=o,r=i,V=d;return m(),n(k,null,[u(F,p(c(b(R))),null,16),f("div",x,[f("div",C,[u(l,{plain:"",onClick:a[0]||(a[0]=e=>J.value=!0)},{default:g((()=>[D])),_:1}),u(l,{plain:"",type:"danger"},{default:g((()=>[P])),_:1})]),f("div",M,[u(l,{type:"primary"},{default:g((()=>[S])),_:1}),u(l,{type:"primary",onClick:a[1]||(a[1]=()=>{})},{default:g((()=>[T])),_:1})])]),f("div",U,[u(w,{tableOpts:b(I),onGetTableData:H},null,8,["tableOpts"])]),u(V,{title:(b(B).id?"编辑":"新增")+"角色",modelValue:b(J),"onUpdate:modelValue":a[5]||(a[5]=e=>h(J)?J.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":q},{default:g((()=>[u(b(y),{ref_key:"formEle",ref:v,model:b(B),rules:b(E),"status-icon":"","label-width":"100px",class:"demo-resourceForm"},{default:g((()=>[u(r,{label:"角色名称",prop:"roleName"},{default:g((()=>[u(t,{modelValue:b(B).roleName,"onUpdate:modelValue":a[2]||(a[2]=e=>b(B).roleName=e)},null,8,["modelValue"])])),_:1}),u(r,{label:"标识",prop:"mark"},{default:g((()=>[u(t,{modelValue:b(B).mark,"onUpdate:modelValue":a[3]||(a[3]=e=>b(B).mark=e)},null,8,["modelValue"])])),_:1}),u(r,{label:"角色描述",prop:"remark"},{default:g((()=>[u(t,{modelValue:b(B).remark,"onUpdate:modelValue":a[4]||(a[4]=e=>b(B).remark=e),type:"textarea"},null,8,["modelValue"])])),_:1}),u(r,null,{default:g((()=>[u(l,{type:"primary",onClick:G},{default:g((()=>[W])),_:1}),u(l,{onClick:O},{default:g((()=>[Y])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{A as default};
