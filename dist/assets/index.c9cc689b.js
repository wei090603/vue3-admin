import{d as e,r as a,e as l,t,v as i,x as r,y as s,z as n,q as d,o,c as p,l as c,D as m,F as u,u as b,b as f,w as g,H as y,G as h,f as V,m as v,L as _,I as w,J as F,E as x,K as k}from"./index.83fac2ba.js";/* empty css                  *//* empty css                */import{G as D,F as H,_ as C}from"./index.d9bd8e3f.js";import{c as M,a as Y,b as j,d as I}from"./article.4c192528.js";/* empty css                  *//* empty css                    */const T={class:"operate-wrapper"},N={class:"operate-left-btn"},P=w("新增"),S=w("删除"),E={class:"operate-right-btn"},O=w("导入"),U=w("导出"),q=w("保存"),z=w("重置"),G=e({setup(e){const w=a({searchForm:{limit:10,page:1,title:""},formVisible:!1,parentName:""}),G=a({id:"",title:"",parentId:0,grade:0}),A=e=>{$.currentPage=1,w.searchForm=e,B()},B=async()=>{w.searchForm.page=$.currentPage,w.searchForm.limit=$.pageSize;const{list:e,total:a}=await M(w.searchForm);$.data=e,$.total=a},J=l(),K=()=>{J.value.resetFields()},L=()=>{K(),G.id="",G.parentId=0,G.grade=0,w.parentName="",w.formVisible=!1},Q=e=>{ae.value=!0,F((()=>{w.parentName=e.title,G.parentId=Number(e.id),G.grade=1}))},R=async()=>{await J.value.validate(),G.id?await Y(G.id,G):await j(G),B(),x({type:"success",message:G.id?"修改成功":"新增成功"}),L()},W=e=>{w.formVisible=!0,F((()=>{G.id=e.id,G.title=e.title}))},X=({id:e})=>{k.confirm("确定删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await I(e),B(),x({type:"success",message:"删除成功!"})})).catch((()=>{}))},Z=a({onClickSearch:A,onClickClear:A,filters:[{type:D.input,key:"title",label:"分类名：",initialValue:"",validator:[{max:20,message:"请输入 20 个以内字符",trigger:["blur","change"]}]}]}),$=a({currentPage:1,pageSize:10,total:1,data:[],multipleTable:!0,multipleSelection:[],indexes:["序号"],dynamic:!0,hasOperation:!0,pagination:!0,pageHandleFunc:"getTableData",column:[{label:"分类名",prop:"title"},{label:"创建日期",prop:"createdAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]},{label:"更新日期",prop:"updateAt",filterParams:["formatTime","YYYY-MM-DD HH:MM:ss"]}],operation:{label:"操作",width:"300",data:[{label:"添加子分类",type:"primary",icon:"el-icon-edit",handleFunc:"handleCreate",isShow:e=>0===e.grade},{label:"编辑",type:"primary",icon:"el-icon-edit",handleFunc:"handleEdit"},{label:"删除",type:"danger",icon:"el-icon-delete",handleFunc:"handleDel"}]}}),ee=a({parentId:[{required:!0}],title:[{required:!0,message:"请输入分类名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}),{formVisible:ae,parentName:le}=t(w);return i((()=>{B()})),(e,a)=>{const l=r,t=C,i=s,w=n,F=d;return o(),p(_,null,[c(H,m(u(b(Z))),null,16),f("div",T,[f("div",N,[c(l,{plain:"",onClick:a[0]||(a[0]=e=>ae.value=!0)},{default:g((()=>[P])),_:1}),c(l,{plain:"",type:"danger"},{default:g((()=>[S])),_:1})]),f("div",E,[c(l,{type:"primary"},{default:g((()=>[O])),_:1}),c(l,{type:"primary"},{default:g((()=>[U])),_:1})])]),c(t,{tableOpts:b($),"onUpdate:tableOpts":a[1]||(a[1]=e=>y($)?$.value=e:$=e),onGetTableData:B,onHandleCreate:Q,onHandleEdit:W,onHandleDel:X},null,8,["tableOpts"]),c(F,{title:(b(G).id?"编辑":"新增")+"分类",modelValue:b(ae),"onUpdate:modelValue":a[5]||(a[5]=e=>y(ae)?ae.value=e:null),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"40%","before-close":L},{default:g((()=>[c(b(h),{model:b(G),"status-icon":"",rules:b(ee),ref_key:"formEle",ref:J,"label-width":"100px"},{default:g((()=>[b(G).parentId?(o(),V(w,{key:0,label:"父级分类",prop:"parentId"},{default:g((()=>[c(i,{disabled:"",modelValue:b(le),"onUpdate:modelValue":a[2]||(a[2]=e=>y(le)?le.value=e:null)},null,8,["modelValue"])])),_:1})):v("",!0),c(w,{label:"分类名：",prop:"title"},{default:g((()=>[c(i,{modelValue:b(G).title,"onUpdate:modelValue":a[3]||(a[3]=e=>b(G).title=e)},null,8,["modelValue"])])),_:1}),c(w,null,{default:g((()=>[c(l,{type:"primary",onClick:R},{default:g((()=>[q])),_:1}),c(l,{onClick:a[4]||(a[4]=e=>K())},{default:g((()=>[z])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])],64)}}});export{G as default};
